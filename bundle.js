(()=>{var e={478:(e,t,n)=>{"use strict";e.exports=function(e,t){e=e||document.body;var n=[.01,1/0];"distanceLimits"in(t=t||{})&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var l=r({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,v=e.clientWidth,f=e.clientHeight,d={view:l,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:l.modes,tick:function(){var t=i(),n=this.delay;l.idle(t-n),l.flush(t-(100+2*n));var r=t-2*n;l.recalcMatrix(r);for(var s=!0,a=l.computedMatrix,o=0;o<16;++o)s=s&&u[o]===a[o],u[o]=a[o];var c=e.clientWidth===v&&e.clientHeight===f;return v=e.clientWidth,f=e.clientHeight,s?!c:(h=Math.exp(l.computedRadius[0]),!0)},lookAt:function(e,t,n){l.lookAt(l.lastT(),e,t,n)},rotate:function(e,t,n){l.rotate(l.lastT(),e,t,n)},pan:function(e,t,n){l.pan(l.lastT(),e,t,n)},translate:function(e,t,n){l.translate(l.lastT(),e,t,n)}};Object.defineProperties(d,{matrix:{get:function(){return l.computedMatrix},set:function(e){return l.setMatrix(l.lastT(),e),l.computedMatrix},enumerable:!0},mode:{get:function(){return l.getMode()},set:function(e){return l.setMode(e),l.getMode()},enumerable:!0},center:{get:function(){return l.computedCenter},set:function(e){return l.lookAt(l.lastT(),e),l.computedCenter},enumerable:!0},eye:{get:function(){return l.computedEye},set:function(e){return l.lookAt(l.lastT(),null,e),l.computedEye},enumerable:!0},up:{get:function(){return l.computedUp},set:function(e){return l.lookAt(l.lastT(),null,null,e),l.computedUp},enumerable:!0},distance:{get:function(){return h},set:function(e){return l.setDistance(l.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return l.getDistanceLimits(n)},set:function(e){return l.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1}));var p=0,m=0,x={shift:!1,control:!1,alt:!1,meta:!1};function b(t,n,r,s){var a=1/e.clientHeight,o=a*(n-p),c=a*(r-m),u=d.flipX?1:-1,v=d.flipY?1:-1,f=Math.PI*d.rotateSpeed,b=i();if(1&t)s.shift?l.rotate(b,0,0,-o*f):l.rotate(b,u*f*o,-v*f*c,0);else if(2&t)l.pan(b,-d.translateSpeed*o*h,d.translateSpeed*c*h,0);else if(4&t){var y=d.zoomSpeed*c/window.innerHeight*(b-l.lastT())*50;l.pan(b,0,0,h*(Math.exp(y)-1))}p=n,m=r,x=s}return s(e,b),e.addEventListener("touchstart",(function(t){var n=o(t.changedTouches[0],e);b(0,n[0],n[1],x),b(1,n[0],n[1],x),t.preventDefault()}),!!c&&{passive:!1}),e.addEventListener("touchmove",(function(t){var n=o(t.changedTouches[0],e);b(1,n[0],n[1],x),t.preventDefault()}),!!c&&{passive:!1}),e.addEventListener("touchend",(function(t){o(t.changedTouches[0],e),b(0,p,m,x),t.preventDefault()}),!!c&&{passive:!1}),a(e,(function(e,t,n){var r=d.flipX?1:-1,s=d.flipY?1:-1,a=i();if(Math.abs(e)>Math.abs(t))l.rotate(a,0,0,-e*r*Math.PI*d.rotateSpeed/window.innerWidth);else{var o=d.zoomSpeed*s*t/window.innerHeight*(a-l.lastT())/100;l.pan(a,0,0,h*(Math.exp(o)-1))}}),!0),d};var i=n(698),r=n(991),s=n(685),a=n(232),o=n(675),c=n(795)},991:(e,t,n)=>{"use strict";e.exports=function(e){var t=(e=e||{}).eye||[0,0,1],n=e.center||[0,0,0],o=e.up||[0,1,0],c=e.distanceLimits||[0,1/0],l=e.mode||"turntable",u=i(),h=r(),v=s();return u.setDistanceLimits(c[0],c[1]),u.lookAt(0,t,n,o),h.setDistanceLimits(c[0],c[1]),h.lookAt(0,t,n,o),v.setDistanceLimits(c[0],c[1]),v.lookAt(0,t,n,o),new a({turntable:u,orbit:h,matrix:v},l)};var i=n(786),r=n(809),s=n(622);function a(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map((function(t){return e[t]})),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=a.prototype;o.flush=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].flush(e)},o.idle=function(e){for(var t=this._controllerList,n=0;n<t.length;++n)t[n].idle(e)},o.lookAt=function(e,t,n,i){for(var r=this._controllerList,s=0;s<r.length;++s)r[s].lookAt(e,t,n,i)},o.rotate=function(e,t,n,i){for(var r=this._controllerList,s=0;s<r.length;++s)r[s].rotate(e,t,n,i)},o.pan=function(e,t,n,i){for(var r=this._controllerList,s=0;s<r.length;++s)r[s].pan(e,t,n,i)},o.translate=function(e,t,n,i){for(var r=this._controllerList,s=0;s<r.length;++s)r[s].translate(e,t,n,i)},o.setMatrix=function(e,t){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].setMatrix(e,t)},o.setDistanceLimits=function(e,t){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].setDistanceLimits(e,t)},o.setDistance=function(e,t){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].setDistance(e,t)},o.recalcMatrix=function(e){this._active.recalcMatrix(e)},o.getDistance=function(e){return this._active.getDistance(e)},o.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},o.lastT=function(){return this._active.lastT()},o.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var n=this._active,i=this._controllerList[t],r=Math.max(n.lastT(),i.lastT());n.recalcMatrix(r),i.setMatrix(r,n.computedMatrix),this._active=i,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},76:e=>{"use strict";function t(e,t,n,i,r){for(var s=r+1;i<=r;){var a=i+r>>>1,o=e[a];(void 0!==n?n(o,t):o-t)>=0?(s=a,r=a-1):i=a+1}return s}function n(e,t,n,i,r){for(var s=r+1;i<=r;){var a=i+r>>>1,o=e[a];(void 0!==n?n(o,t):o-t)>0?(s=a,r=a-1):i=a+1}return s}function i(e,t,n,i,r){for(var s=i-1;i<=r;){var a=i+r>>>1,o=e[a];(void 0!==n?n(o,t):o-t)<0?(s=a,i=a+1):r=a-1}return s}function r(e,t,n,i,r){for(var s=i-1;i<=r;){var a=i+r>>>1,o=e[a];(void 0!==n?n(o,t):o-t)<=0?(s=a,i=a+1):r=a-1}return s}function s(e,t,n,i,r){for(;i<=r;){var s=i+r>>>1,a=e[s],o=void 0!==n?n(a,t):a-t;if(0===o)return s;o<=0?i=s+1:r=s-1}return-1}function a(e,t,n,i,r,s){return"function"==typeof n?s(e,t,n,void 0===i?0:0|i,void 0===r?e.length-1:0|r):s(e,t,void 0,void 0===n?0:0|n,void 0===i?e.length-1:0|i)}e.exports={ge:function(e,n,i,r,s){return a(e,n,i,r,s,t)},gt:function(e,t,i,r,s){return a(e,t,i,r,s,n)},lt:function(e,t,n,r,s){return a(e,t,n,r,s,i)},le:function(e,t,n,i,s){return a(e,t,n,i,s,r)},eq:function(e,t,n,i,r){return a(e,t,n,i,r,s)}}},617:e=>{"use strict";e.exports=function(e,t,n,i,r,s){var a=r-1,o=r*r,c=a*a,l=(1+2*r)*c,u=r*c,h=o*(3-2*r),v=o*a;if(e.length){s||(s=new Array(e.length));for(var f=e.length-1;f>=0;--f)s[f]=l*e[f]+u*t[f]+h*n[f]+v*i[f];return s}return l*e+u*t+h*n+v*i},e.exports.derivative=function(e,t,n,i,r,s){var a=6*r*r-6*r,o=3*r*r-4*r+1,c=-6*r*r+6*r,l=3*r*r-2*r;if(e.length){s||(s=new Array(e.length));for(var u=e.length-1;u>=0;--u)s[u]=a*e[u]+o*t[u]+c*n[u]+l*i[u];return s}return a*e+o*t+c*n[u]+l*i}},173:(e,t,n)=>{"use strict";e.exports=function(e,t,n){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof e?new a(i=c(e),i,0):new a(e,c(e.length),0);case 2:if("number"==typeof t){var i=c(e.length);return new a(e,i,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new a(e,t,n)}};var i=n(617),r=n(76);function s(e,t,n){return Math.min(t,Math.max(e,n))}function a(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var o=a.prototype;function c(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}o.flush=function(e){var t=r.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},o.curve=function(e){var t=this._time,n=t.length,a=r.le(t,e),o=this._scratch[0],c=this._state,l=this._velocity,u=this.dimension,h=this.bounds;if(a<0)for(var v=u-1,f=0;f<u;++f,--v)o[f]=c[v];else if(a>=n-1){v=c.length-1;var d=e-t[n-1];for(f=0;f<u;++f,--v)o[f]=c[v]+d*l[v]}else{v=u*(a+1)-1;var p=t[a],m=t[a+1]-p||1,x=this._scratch[1],b=this._scratch[2],y=this._scratch[3],g=this._scratch[4],M=!0;for(f=0;f<u;++f,--v)x[f]=c[v],y[f]=l[v]*m,b[f]=c[v+u],g[f]=l[v+u]*m,M=M&&x[f]===b[f]&&y[f]===g[f]&&0===y[f];if(M)for(f=0;f<u;++f)o[f]=x[f];else i(x,y,b,g,(e-p)/m,o)}var w=h[0],P=h[1];for(f=0;f<u;++f)o[f]=s(w[f],P[f],o[f]);return o},o.dcurve=function(e){var t=this._time,n=t.length,s=r.le(t,e),a=this._scratch[0],o=this._state,c=this._velocity,l=this.dimension;if(s>=n-1)for(var u=o.length-1,h=(t[n-1],0);h<l;++h,--u)a[h]=c[u];else{u=l*(s+1)-1;var v=t[s],f=t[s+1]-v||1,d=this._scratch[1],p=this._scratch[2],m=this._scratch[3],x=this._scratch[4],b=!0;for(h=0;h<l;++h,--u)d[h]=o[u],m[h]=c[u]*f,p[h]=o[u+l],x[h]=c[u+l]*f,b=b&&d[h]===p[h]&&m[h]===x[h]&&0===m[h];if(b)for(h=0;h<l;++h)a[h]=0;else for(i.derivative(d,m,p,x,(e-v)/f,a),h=0;h<l;++h)a[h]/=f}return a},o.lastT=function(){var e=this._time;return e[e.length-1]},o.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},o.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var i=this._state,r=this._velocity,a=i.length-this.dimension,o=this.bounds,c=o[0],l=o[1];this._time.push(t,e);for(var u=0;u<2;++u)for(var h=0;h<n;++h)i.push(i[a++]),r.push(0);for(this._time.push(e),h=n;h>0;--h)i.push(s(c[h-1],l[h-1],arguments[h])),r.push(0)}},o.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var i=this._state,r=this._velocity,a=i.length-this.dimension,o=e-t,c=this.bounds,l=c[0],u=c[1],h=o>1e-6?1/o:0;this._time.push(e);for(var v=n;v>0;--v){var f=s(l[v-1],u[v-1],arguments[v]);i.push(f),r.push((f-i[a++])*h)}}},o.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,i=this._velocity,r=this.bounds,a=r[0],o=r[1];this._time.push(e);for(var c=t;c>0;--c)n.push(s(a[c-1],o[c-1],arguments[c])),i.push(0)}},o.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var i=this._state,r=this._velocity,a=i.length-this.dimension,o=this.bounds,c=o[0],l=o[1],u=e-t,h=u>1e-6?1/u:0;this._time.push(e);for(var v=n;v>0;--v){var f=arguments[v];i.push(s(c[v-1],l[v-1],i[a++]+f)),r.push(f*h)}}},o.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,i=this._state,r=this._velocity,a=i.length-n,o=this.bounds,c=o[0],l=o[1],u=e-t;this._time.push(e);for(var h=n-1;h>=0;--h)i.push(s(c[h],l[h],i[a]+u*r[a])),r.push(0),a+=1}}},447:e=>{e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},252:e=>{e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},594:e=>{e.exports=function(e){var t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],c=e[7],l=e[8],u=e[9],h=e[10],v=e[11],f=e[12],d=e[13],p=e[14],m=e[15];return(t*a-n*s)*(h*m-v*p)-(t*o-i*s)*(u*m-v*d)+(t*c-r*s)*(u*p-h*d)+(n*o-i*a)*(l*m-v*f)-(n*c-r*a)*(l*p-h*f)+(i*c-r*o)*(l*d-u*f)}},127:e=>{e.exports=function(e,t){var n=t[0],i=t[1],r=t[2],s=t[3],a=n+n,o=i+i,c=r+r,l=n*a,u=i*a,h=i*o,v=r*a,f=r*o,d=r*c,p=s*a,m=s*o,x=s*c;return e[0]=1-h-d,e[1]=u+x,e[2]=v-m,e[3]=0,e[4]=u-x,e[5]=1-l-d,e[6]=f+p,e[7]=0,e[8]=v+m,e[9]=f-p,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},872:e=>{e.exports=function(e,t,n){var i=t[0],r=t[1],s=t[2],a=t[3],o=i+i,c=r+r,l=s+s,u=i*o,h=i*c,v=i*l,f=r*c,d=r*l,p=s*l,m=a*o,x=a*c,b=a*l;return e[0]=1-(f+p),e[1]=h+b,e[2]=v-x,e[3]=0,e[4]=h-b,e[5]=1-(u+p),e[6]=d+m,e[7]=0,e[8]=v+x,e[9]=d-m,e[10]=1-(u+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},312:e=>{e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},481:e=>{e.exports=function(e,t){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],c=t[6],l=t[7],u=t[8],h=t[9],v=t[10],f=t[11],d=t[12],p=t[13],m=t[14],x=t[15],b=n*o-i*a,y=n*c-r*a,g=n*l-s*a,M=i*c-r*o,w=i*l-s*o,P=r*l-s*c,k=u*p-h*d,_=u*m-v*d,R=u*x-f*d,T=h*m-v*p,z=h*x-f*p,L=v*x-f*m,E=b*L-y*z+g*T+M*R-w*_+P*k;return E?(E=1/E,e[0]=(o*L-c*z+l*T)*E,e[1]=(r*z-i*L-s*T)*E,e[2]=(p*P-m*w+x*M)*E,e[3]=(v*w-h*P-f*M)*E,e[4]=(c*R-a*L-l*_)*E,e[5]=(n*L-r*R+s*_)*E,e[6]=(m*g-d*P-x*y)*E,e[7]=(u*P-v*g+f*y)*E,e[8]=(a*z-o*R+l*k)*E,e[9]=(i*R-n*z-s*k)*E,e[10]=(d*w-p*g+x*b)*E,e[11]=(h*g-u*w-f*b)*E,e[12]=(o*_-a*T-c*k)*E,e[13]=(n*T-i*_+r*k)*E,e[14]=(p*y-d*M-m*b)*E,e[15]=(u*M-h*y+v*b)*E,e):null}},727:(e,t,n)=>{var i=n(312);e.exports=function(e,t,n,r){var s,a,o,c,l,u,h,v,f,d,p=t[0],m=t[1],x=t[2],b=r[0],y=r[1],g=r[2],M=n[0],w=n[1],P=n[2];return Math.abs(p-M)<1e-6&&Math.abs(m-w)<1e-6&&Math.abs(x-P)<1e-6?i(e):(h=p-M,v=m-w,f=x-P,s=y*(f*=d=1/Math.sqrt(h*h+v*v+f*f))-g*(v*=d),a=g*(h*=d)-b*f,o=b*v-y*h,(d=Math.sqrt(s*s+a*a+o*o))?(s*=d=1/d,a*=d,o*=d):(s=0,a=0,o=0),c=v*o-f*a,l=f*s-h*o,u=h*a-v*s,(d=Math.sqrt(c*c+l*l+u*u))?(c*=d=1/d,l*=d,u*=d):(c=0,l=0,u=0),e[0]=s,e[1]=c,e[2]=h,e[3]=0,e[4]=a,e[5]=l,e[6]=v,e[7]=0,e[8]=o,e[9]=u,e[10]=f,e[11]=0,e[12]=-(s*p+a*m+o*x),e[13]=-(c*p+l*m+u*x),e[14]=-(h*p+v*m+f*x),e[15]=1,e)}},401:e=>{e.exports=function(e,t,n){var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],c=t[5],l=t[6],u=t[7],h=t[8],v=t[9],f=t[10],d=t[11],p=t[12],m=t[13],x=t[14],b=t[15],y=n[0],g=n[1],M=n[2],w=n[3];return e[0]=y*i+g*o+M*h+w*p,e[1]=y*r+g*c+M*v+w*m,e[2]=y*s+g*l+M*f+w*x,e[3]=y*a+g*u+M*d+w*b,y=n[4],g=n[5],M=n[6],w=n[7],e[4]=y*i+g*o+M*h+w*p,e[5]=y*r+g*c+M*v+w*m,e[6]=y*s+g*l+M*f+w*x,e[7]=y*a+g*u+M*d+w*b,y=n[8],g=n[9],M=n[10],w=n[11],e[8]=y*i+g*o+M*h+w*p,e[9]=y*r+g*c+M*v+w*m,e[10]=y*s+g*l+M*f+w*x,e[11]=y*a+g*u+M*d+w*b,y=n[12],g=n[13],M=n[14],w=n[15],e[12]=y*i+g*o+M*h+w*p,e[13]=y*r+g*c+M*v+w*m,e[14]=y*s+g*l+M*f+w*x,e[15]=y*a+g*u+M*d+w*b,e}},397:e=>{e.exports=function(e,t,n,i){var r,s,a,o,c,l,u,h,v,f,d,p,m,x,b,y,g,M,w,P,k,_,R,T,z=i[0],L=i[1],E=i[2],A=Math.sqrt(z*z+L*L+E*E);return Math.abs(A)<1e-6?null:(z*=A=1/A,L*=A,E*=A,r=Math.sin(n),a=1-(s=Math.cos(n)),o=t[0],c=t[1],l=t[2],u=t[3],h=t[4],v=t[5],f=t[6],d=t[7],p=t[8],m=t[9],x=t[10],b=t[11],y=z*z*a+s,g=L*z*a+E*r,M=E*z*a-L*r,w=z*L*a-E*r,P=L*L*a+s,k=E*L*a+z*r,_=z*E*a+L*r,R=L*E*a-z*r,T=E*E*a+s,e[0]=o*y+h*g+p*M,e[1]=c*y+v*g+m*M,e[2]=l*y+f*g+x*M,e[3]=u*y+d*g+b*M,e[4]=o*w+h*P+p*k,e[5]=c*w+v*P+m*k,e[6]=l*w+f*P+x*k,e[7]=u*w+d*P+b*k,e[8]=o*_+h*R+p*T,e[9]=c*_+v*R+m*T,e[10]=l*_+f*R+x*T,e[11]=u*_+d*R+b*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},663:e=>{e.exports=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),s=t[4],a=t[5],o=t[6],c=t[7],l=t[8],u=t[9],h=t[10],v=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*r+l*i,e[5]=a*r+u*i,e[6]=o*r+h*i,e[7]=c*r+v*i,e[8]=l*r-s*i,e[9]=u*r-a*i,e[10]=h*r-o*i,e[11]=v*r-c*i,e}},113:e=>{e.exports=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),s=t[0],a=t[1],o=t[2],c=t[3],l=t[8],u=t[9],h=t[10],v=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r-l*i,e[1]=a*r-u*i,e[2]=o*r-h*i,e[3]=c*r-v*i,e[8]=s*i+l*r,e[9]=a*i+u*r,e[10]=o*i+h*r,e[11]=c*i+v*r,e}},974:e=>{e.exports=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),s=t[0],a=t[1],o=t[2],c=t[3],l=t[4],u=t[5],h=t[6],v=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r+l*i,e[1]=a*r+u*i,e[2]=o*r+h*i,e[3]=c*r+v*i,e[4]=l*r-s*i,e[5]=u*r-a*i,e[6]=h*r-o*i,e[7]=v*r-c*i,e}},28:e=>{e.exports=function(e,t,n){var i=n[0],r=n[1],s=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},602:e=>{e.exports=function(e,t,n){var i,r,s,a,o,c,l,u,h,v,f,d,p=n[0],m=n[1],x=n[2];return t===e?(e[12]=t[0]*p+t[4]*m+t[8]*x+t[12],e[13]=t[1]*p+t[5]*m+t[9]*x+t[13],e[14]=t[2]*p+t[6]*m+t[10]*x+t[14],e[15]=t[3]*p+t[7]*m+t[11]*x+t[15]):(i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],c=t[5],l=t[6],u=t[7],h=t[8],v=t[9],f=t[10],d=t[11],e[0]=i,e[1]=r,e[2]=s,e[3]=a,e[4]=o,e[5]=c,e[6]=l,e[7]=u,e[8]=h,e[9]=v,e[10]=f,e[11]=d,e[12]=i*p+o*m+h*x+t[12],e[13]=r*p+c*m+v*x+t[13],e[14]=s*p+l*m+f*x+t[14],e[15]=a*p+u*m+d*x+t[15]),e}},683:e=>{e.exports=function(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=r,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},600:e=>{e.exports=function(e,t,n,i){var r,s,a,o,c,l=t[0],u=t[1],h=t[2],v=t[3],f=n[0],d=n[1],p=n[2],m=n[3];return(s=l*f+u*d+h*p+v*m)<0&&(s=-s,f=-f,d=-d,p=-p,m=-m),1-s>1e-6?(r=Math.acos(s),a=Math.sin(r),o=Math.sin((1-i)*r)/a,c=Math.sin(i*r)/a):(o=1-i,c=i),e[0]=o*l+c*f,e[1]=o*u+c*d,e[2]=o*h+c*p,e[3]=o*v+c*m,e}},858:e=>{e.exports=function(e,t,n){var i=t[0],r=t[1],s=t[2],a=n[0],o=n[1],c=n[2];return e[0]=r*c-s*o,e[1]=s*a-i*c,e[2]=i*o-r*a,e}},368:e=>{e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},563:e=>{e.exports=function(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}},919:e=>{e.exports=function(e,t,n,i){var r=t[0],s=t[1],a=t[2];return e[0]=r+i*(n[0]-r),e[1]=s+i*(n[1]-s),e[2]=a+i*(n[2]-a),e}},91:e=>{e.exports=function(e,t){var n=t[0],i=t[1],r=t[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}},795:(e,t,n)=>{"use strict";var i=n(33);e.exports=i&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},33:e=>{e.exports=!0},805:(e,t,n)=>{var i=n(604),r=n(252),s=n(447),a=n(594),o=n(481),c=n(683),l={length:n(563),normalize:n(91),dot:n(368),cross:n(858)},u=r(),h=r(),v=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];function p(e,t,n,i,r){e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r}e.exports=function(e,t,n,r,m,x){if(t||(t=[0,0,0]),n||(n=[0,0,0]),r||(r=[0,0,0]),m||(m=[0,0,0,1]),x||(x=[0,0,0,1]),!i(u,e))return!1;if(s(h,u),h[3]=0,h[7]=0,h[11]=0,h[15]=1,Math.abs(a(h)<1e-8))return!1;var b,y,g,M,w,P,k,_=u[3],R=u[7],T=u[11],z=u[12],L=u[13],E=u[14],A=u[15];if(0!==_||0!==R||0!==T){if(v[0]=_,v[1]=R,v[2]=T,v[3]=A,!o(h,h))return!1;c(h,h),b=m,g=h,M=(y=v)[0],w=y[1],P=y[2],k=y[3],b[0]=g[0]*M+g[4]*w+g[8]*P+g[12]*k,b[1]=g[1]*M+g[5]*w+g[9]*P+g[13]*k,b[2]=g[2]*M+g[6]*w+g[10]*P+g[14]*k,b[3]=g[3]*M+g[7]*w+g[11]*P+g[15]*k}else m[0]=m[1]=m[2]=0,m[3]=1;if(t[0]=z,t[1]=L,t[2]=E,function(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}(f,u),n[0]=l.length(f[0]),l.normalize(f[0],f[0]),r[0]=l.dot(f[0],f[1]),p(f[1],f[1],f[0],1,-r[0]),n[1]=l.length(f[1]),l.normalize(f[1],f[1]),r[0]/=n[1],r[1]=l.dot(f[0],f[2]),p(f[2],f[2],f[0],1,-r[1]),r[2]=l.dot(f[1],f[2]),p(f[2],f[2],f[1],1,-r[2]),n[2]=l.length(f[2]),l.normalize(f[2],f[2]),r[1]/=n[2],r[2]/=n[2],l.cross(d,f[1],f[2]),l.dot(f[0],d)<0)for(var S=0;S<3;S++)n[S]*=-1,f[S][0]*=-1,f[S][1]*=-1,f[S][2]*=-1;return x[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),x[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),x[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),x[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(x[0]=-x[0]),f[0][2]>f[2][0]&&(x[1]=-x[1]),f[1][0]>f[0][1]&&(x[2]=-x[2]),!0}},604:e=>{e.exports=function(e,t){var n=t[15];if(0===n)return!1;for(var i=1/n,r=0;r<16;r++)e[r]=t[r]*i;return!0}},726:(e,t,n)=>{var i=n(919),r=n(814),s=n(805),a=n(594),o=n(210),c=h(),l=h(),u=h();function h(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(e){return[e||0,e||0,e||0]}e.exports=function(e,t,n,h){if(0===a(t)||0===a(n))return!1;var v=s(t,c.translate,c.scale,c.skew,c.perspective,c.quaternion),f=s(n,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!(!v||!f||(i(u.translate,c.translate,l.translate,h),i(u.skew,c.skew,l.skew,h),i(u.scale,c.scale,l.scale,h),i(u.perspective,c.perspective,l.perspective,h),o(u.quaternion,c.quaternion,l.quaternion,h),r(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}},814:(e,t,n)=>{var i={identity:n(312),translate:n(602),multiply:n(401),create:n(252),scale:n(28),fromRotationTranslation:n(872)},r=(i.create(),i.create());e.exports=function(e,t,n,s,a,o){return i.identity(e),i.fromRotationTranslation(e,o,t),e[3]=a[0],e[7]=a[1],e[11]=a[2],e[15]=a[3],i.identity(r),0!==s[2]&&(r[9]=s[2],i.multiply(e,e,r)),0!==s[1]&&(r[9]=0,r[8]=s[1],i.multiply(e,e,r)),0!==s[0]&&(r[8]=0,r[4]=s[0],i.multiply(e,e,r)),i.scale(e,e,n),e}},622:(e,t,n)=>{"use strict";var i=n(76),r=n(726),s=n(481),a=n(663),o=n(113),c=n(974),l=n(727),u=n(602),h=(n(28),n(91)),v=[0,0,0];function f(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(e){return new f((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var d=f.prototype;d.recalcMatrix=function(e){var t=this._time,n=i.le(t,e),a=this.computedMatrix;if(!(n<0)){var o=this._components;if(n===t.length-1)for(var c=16*n,l=0;l<16;++l)a[l]=o[c++];else{var u=t[n+1]-t[n],v=(c=16*n,this.prevMatrix),f=!0;for(l=0;l<16;++l)v[l]=o[c++];var d=this.nextMatrix;for(l=0;l<16;++l)d[l]=o[c++],f=f&&v[l]===d[l];if(u<1e-6||f)for(l=0;l<16;++l)a[l]=v[l];else r(a,v,d,(e-t[n])/u)}var p=this.computedUp;p[0]=a[1],p[1]=a[5],p[2]=a[9],h(p,p);var m=this.computedInverse;s(m,a);var x=this.computedEye,b=m[15];x[0]=m[12]/b,x[1]=m[13]/b,x[2]=m[14]/b;var y=this.computedCenter,g=Math.exp(this.computedRadius[0]);for(l=0;l<3;++l)y[l]=x[l]-a[2+4*l]*g}},d.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,i=0;i<16;++i)t.push(t[n++]);this._time.push(e)}},d.flush=function(e){var t=i.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},d.lastT=function(){return this._time[this._time.length-1]},d.lookAt=function(e,t,n,i){this.recalcMatrix(e),t=t||this.computedEye,n=n||v,i=i||this.computedUp,this.setMatrix(e,l(this.computedMatrix,t,n,i));for(var r=0,s=0;s<3;++s)r+=Math.pow(n[s]-t[s],2);r=Math.log(Math.sqrt(r)),this.computedRadius[0]=r},d.rotate=function(e,t,n,i){this.recalcMatrix(e);var r=this.computedInverse;t&&o(r,r,t),n&&a(r,r,n),i&&c(r,r,i),this.setMatrix(e,s(this.computedMatrix,r))};var p=[0,0,0];d.pan=function(e,t,n,i){p[0]=-(t||0),p[1]=-(n||0),p[2]=-(i||0),this.recalcMatrix(e);var r=this.computedInverse;u(r,r,p),this.setMatrix(e,s(r,r))},d.translate=function(e,t,n,i){p[0]=t||0,p[1]=n||0,p[2]=i||0,this.recalcMatrix(e);var r=this.computedMatrix;u(r,r,p),this.setMatrix(e,r)},d.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},d.setDistance=function(e,t){this.computedRadius[0]=t},d.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},d.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},685:(e,t,n)=>{"use strict";e.exports=function(e,t){t||(t=e,e=window);var n=0,r=0,s=0,a={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function c(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==a.alt,a.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==a.shift,a.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==a.control,a.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==a.meta,a.meta=!!e.metaKey),t}function l(e,o){var l=i.x(o),u=i.y(o);"buttons"in o&&(e=0|o.buttons),(e!==n||l!==r||u!==s||c(o))&&(n=0|e,r=l||0,s=u||0,t&&t(n,r,s,a))}function u(e){l(0,e)}function h(){(n||r||s||a.shift||a.alt||a.meta||a.control)&&(r=s=0,n=0,a.shift=a.alt=a.control=a.meta=!1,t&&t(0,0,0,a))}function v(e){c(e)&&t&&t(n,r,s,a)}function f(e){0===i.buttons(e)?l(0,e):l(n,e)}function d(e){l(n|i.buttons(e),e)}function p(e){l(n&~i.buttons(e),e)}function m(){o||(o=!0,e.addEventListener("mousemove",f),e.addEventListener("mousedown",d),e.addEventListener("mouseup",p),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",h),e.addEventListener("keyup",v),e.addEventListener("keydown",v),e.addEventListener("keypress",v),e!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",v),window.addEventListener("keydown",v),window.addEventListener("keypress",v)))}m();var x={element:e};return Object.defineProperties(x,{enabled:{get:function(){return o},set:function(t){t?m():o&&(o=!1,e.removeEventListener("mousemove",f),e.removeEventListener("mousedown",d),e.removeEventListener("mouseup",p),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",h),e.removeEventListener("keyup",v),e.removeEventListener("keydown",v),e.removeEventListener("keypress",v),e!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",v),window.removeEventListener("keydown",v),window.removeEventListener("keypress",v)))},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),x};var i=n(294)},675:e=>{var t={left:0,top:0};e.exports=function(e,n,i){n=n||e.currentTarget||e.srcElement,Array.isArray(i)||(i=[0,0]);var r,s=e.clientX||0,a=e.clientY||0,o=(r=n)===window||r===document||r===document.body?t:r.getBoundingClientRect();return i[0]=s-o.left,i[1]=a-o.top,i}},294:(e,t)=>{"use strict";function n(e){return e.target||e.srcElement||window}t.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},t.element=n,t.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=n(e).getBoundingClientRect();return e.clientX-t.left}return 0},t.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=n(e).getBoundingClientRect();return e.clientY-t.top}return 0}},232:(e,t,n)=>{"use strict";var i=n(810);e.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e),s=function(e){n&&e.preventDefault();var i=e.deltaX||0,s=e.deltaY||0,a=e.deltaZ||0,o=1;switch(e.deltaMode){case 1:o=r;break;case 2:o=window.innerHeight}if(s*=o,a*=o,(i*=o)||s||a)return t(i,s,a,e)};return e.addEventListener("wheel",s),s}},918:e=>{"use strict";e.exports=function(e,t,n,i,r,s,a,o,c,l){var u=t+s+l;if(h>0){var h=Math.sqrt(u+1);e[0]=.5*(a-c)/h,e[1]=.5*(o-i)/h,e[2]=.5*(n-s)/h,e[3]=.5*h}else{var v=Math.max(t,s,l);h=Math.sqrt(2*v-u+1),t>=v?(e[0]=.5*h,e[1]=.5*(r+n)/h,e[2]=.5*(o+i)/h,e[3]=.5*(a-c)/h):s>=v?(e[0]=.5*(n+r)/h,e[1]=.5*h,e[2]=.5*(c+a)/h,e[3]=.5*(o-i)/h):(e[0]=.5*(i+o)/h,e[1]=.5*(a+c)/h,e[2]=.5*h,e[3]=.5*(n-r)/h)}return e}},809:(e,t,n)=>{"use strict";e.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.rotation||[0,0,0,1],i=e.radius||1;t=[].slice.call(t,0,3),u(n=[].slice.call(n,0,4),n);var r=new h(n,t,Math.log(i));return r.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&r.lookAt(0,e.eye,e.center,e.up),r};var i=n(173),r=n(727),s=n(127),a=n(481),o=n(918);function c(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function l(e,t,n,i){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(i,2))}function u(e,t){var n=t[0],i=t[1],r=t[2],s=t[3],a=l(n,i,r,s);a>1e-6?(e[0]=n/a,e[1]=i/a,e[2]=r/a,e[3]=s/a):(e[0]=e[1]=e[2]=0,e[3]=1)}function h(e,t,n){this.radius=i([n]),this.center=i(t),this.rotation=i(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=h.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;u(t,t);var n=this.computedMatrix;s(n,t);var i=this.computedCenter,r=this.computedEye,a=this.computedUp,o=Math.exp(this.computedRadius[0]);r[0]=i[0]+o*n[2],r[1]=i[1]+o*n[6],r[2]=i[2]+o*n[10],a[0]=n[1],a[1]=n[5],a[2]=n[9];for(var c=0;c<3;++c){for(var l=0,h=0;h<3;++h)l+=n[c+4*h]*r[h];n[12+c]=-l}},v.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var i=0;i<16;++i)t[i]=n[i];return t}return n},v.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},v.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},v.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var r=this.computedMatrix,s=r[1],a=r[5],o=r[9],l=c(s,a,o);s/=l,a/=l,o/=l;var u=r[0],h=r[4],v=r[8],f=u*s+h*a+v*o,d=c(u-=s*f,h-=a*f,v-=o*f);u/=d,h/=d,v/=d;var p=r[2],m=r[6],x=r[10],b=p*s+m*a+x*o,y=p*u+m*h+x*v,g=c(p-=b*s+y*u,m-=b*a+y*h,x-=b*o+y*v);p/=g,m/=g,x/=g;var M=u*t+s*n,w=h*t+a*n,P=v*t+o*n;this.center.move(e,M,w,P);var k=Math.exp(this.computedRadius[0]);k=Math.max(1e-4,k+i),this.radius.set(e,Math.log(k))},v.rotate=function(e,t,n,i){this.recalcMatrix(e),t=t||0,n=n||0;var r=this.computedMatrix,s=r[0],a=r[4],o=r[8],u=r[1],h=r[5],v=r[9],f=r[2],d=r[6],p=r[10],m=t*s+n*u,x=t*a+n*h,b=t*o+n*v,y=-(d*b-p*x),g=-(p*m-f*b),M=-(f*x-d*m),w=Math.sqrt(Math.max(0,1-Math.pow(y,2)-Math.pow(g,2)-Math.pow(M,2))),P=l(y,g,M,w);P>1e-6?(y/=P,g/=P,M/=P,w/=P):(y=g=M=0,w=1);var k=this.computedRotation,_=k[0],R=k[1],T=k[2],z=k[3],L=_*w+z*y+R*M-T*g,E=R*w+z*g+T*y-_*M,A=T*w+z*M+_*g-R*y,S=z*w-_*y-R*g-T*M;if(i){y=f,g=d,M=p;var D=Math.sin(i)/c(y,g,M);y*=D,g*=D,M*=D,S=S*(w=Math.cos(t))-(L=L*w+S*y+E*M-A*g)*y-(E=E*w+S*g+A*y-L*M)*g-(A=A*w+S*M+L*g-E*y)*M}var q=l(L,E,A,S);q>1e-6?(L/=q,E/=q,A/=q,S/=q):(L=E=A=0,S=1),this.rotation.set(e,L,E,A,S)},v.lookAt=function(e,t,n,i){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,i=i||this.computedUp;var s=this.computedMatrix;r(s,t,n,i);var a=this.computedRotation;o(a,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),u(a,a),this.rotation.set(e,a[0],a[1],a[2],a[3]);for(var c=0,l=0;l<3;++l)c+=Math.pow(n[l]-t[l],2);this.radius.set(e,.5*Math.log(Math.max(c,1e-6))),this.center.set(e,n[0],n[1],n[2])},v.translate=function(e,t,n,i){this.center.move(e,t||0,n||0,i||0)},v.setMatrix=function(e,t){var n=this.computedRotation;o(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),u(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var i=this.computedMatrix;a(i,t);var r=i[15];if(Math.abs(r)>1e-6){var s=i[12]/r,c=i[13]/r,l=i[14]/r;this.recalcMatrix(e);var h=Math.exp(this.computedRadius[0]);this.center.set(e,s-i[2]*h,c-i[6]*h,l-i[10]*h),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},v.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},v.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},v.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var i=e.rotation;i&&this.rotation.set(t,i[0],i[1],i[2],i[3]);var r=e.distance;r&&r>0&&this.radius.set(t,Math.log(r)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},885:e=>{e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},210:(e,t,n)=>{e.exports=n(600)},698:(e,t,n)=>{e.exports=n.g.performance&&n.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},792:function(e){e.exports=function(){"use strict";var e=function(){var t=0,n=document.createElement("div");function i(e){return n.appendChild(e.dom),e}function r(e){for(var i=0;i<n.children.length;i++)n.children[i].style.display=i===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(e){e.preventDefault(),r(++t%n.children.length)}),!1);var s=(performance||Date).now(),a=s,o=0,c=i(new e.Panel("FPS","#0ff","#002")),l=i(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=i(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:n,addPanel:i,showPanel:r,begin:function(){s=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(l.update(e-s,200),a+1e3<=e&&(c.update(1e3*o/(e-a),100),a=e,o=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){s=this.end()},domElement:n,setMode:r}};return e.Panel=function(e,t,n){var i=1/0,r=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,c=48*a,l=3*a,u=2*a,h=3*a,v=15*a,f=74*a,d=30*a,p=document.createElement("canvas");p.width=o,p.height=c,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,o,c),m.fillStyle=t,m.fillText(e,l,u),m.fillRect(h,v,f,d),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(h,v,f,d),{dom:p,update:function(c,x){i=Math.min(i,c),r=Math.max(r,c),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,o,v),m.fillStyle=t,m.fillText(s(c)+" "+e+" ("+s(i)+"-"+s(r)+")",l,u),m.drawImage(p,h+a,v,f-a,d,h,v,f-a,d),m.fillRect(h+f-a,v,a,d),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(h+f-a,v,a,s((1-c/x)*d))}}},e}()},810:(e,t,n)=>{"use strict";var i=n(885);e.exports=o;var r=a("in",document.body);function s(e,t){var n=i(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function a(e,t){var n=document.createElement("div");n.style.height="128"+e,t.appendChild(n);var i=s(n,"height")/128;return t.removeChild(n),i}function o(e,t){if(!e)return null;switch(t=t||document.body,e=(e+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return a(e,t);case"em":return s(t,"font-size");case"rem":return s(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6;case"px":return 1}var n=i(e);if(!isNaN(n[0])&&n[1]){var c=o(n[1],t);return"number"==typeof c?n[0]*c:null}return null}},786:(e,t,n)=>{"use strict";e.exports=function(e){var t=(e=e||{}).center||[0,0,0],n=e.up||[0,1,0],i=e.right||h(n),r=e.radius||1,s=e.theta||0,u=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),o(n,n),i=[].slice.call(i,0,3),o(i,i),"eye"in e){var f=e.eye,d=[f[0]-t[0],f[1]-t[1],f[2]-t[2]];a(i,d,n),l(i[0],i[1],i[2])<1e-6?i=h(n):o(i,i),r=l(d[0],d[1],d[2]);var p=c(n,d)/r,m=c(i,d)/r;u=Math.acos(p),s=Math.acos(m)}return r=Math.log(r),new v(e.zoomMin,e.zoomMax,t,n,i,r,s,u)};var i=n(173),r=n(481),s=n(397),a=n(858),o=n(91),c=n(368);function l(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function u(e){return Math.min(1,Math.max(-1,e))}function h(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),i=Math.abs(e[2]),r=[0,0,0];t>Math.max(n,i)?r[2]=1:n>Math.max(t,i)?r[0]=1:r[1]=1;for(var s=0,a=0,c=0;c<3;++c)s+=e[c]*e[c],a+=r[c]*e[c];for(c=0;c<3;++c)r[c]-=a/s*e[c];return o(r,r),r}function v(e,t,n,r,s,a,o,c){this.center=i(n),this.up=i(r),this.right=i(s),this.radius=i([a]),this.angle=i([o,c]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}var f=v.prototype;f.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},f.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},f.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,i=0,r=0,s=0;s<3;++s)r+=t[s]*n[s],i+=t[s]*t[s];var c=Math.sqrt(i),u=0;for(s=0;s<3;++s)n[s]-=t[s]*r/i,u+=n[s]*n[s],t[s]/=c;var h=Math.sqrt(u);for(s=0;s<3;++s)n[s]/=h;var v=this.computedToward;a(v,t,n),o(v,v);var f=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],p=this.computedAngle[1],m=Math.cos(d),x=Math.sin(d),b=Math.cos(p),y=Math.sin(p),g=this.computedCenter,M=m*b,w=x*b,P=y,k=-m*y,_=-x*y,R=b,T=this.computedEye,z=this.computedMatrix;for(s=0;s<3;++s){var L=M*n[s]+w*v[s]+P*t[s];z[4*s+1]=k*n[s]+_*v[s]+R*t[s],z[4*s+2]=L,z[4*s+3]=0}var E=z[1],A=z[5],S=z[9],D=z[2],q=z[6],B=z[10],U=A*B-S*q,C=S*D-E*B,I=E*q-A*D,F=l(U,C,I);for(U/=F,C/=F,I/=F,z[0]=U,z[4]=C,z[8]=I,s=0;s<3;++s)T[s]=g[s]+z[2+4*s]*f;for(s=0;s<3;++s){u=0;for(var N=0;N<3;++N)u+=z[s+4*N]*T[N];z[12+s]=-u}z[15]=1},f.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var i=0;i<16;++i)t[i]=n[i];return t}return n};var d=[0,0,0];f.rotate=function(e,t,n,i){if(this.angle.move(e,t,n),i){this.recalcMatrix(e);var r=this.computedMatrix;d[0]=r[2],d[1]=r[6],d[2]=r[10];for(var a=this.computedUp,o=this.computedRight,c=this.computedToward,l=0;l<3;++l)r[4*l]=a[l],r[4*l+1]=o[l],r[4*l+2]=c[l];for(s(r,r,i,d),l=0;l<3;++l)a[l]=r[4*l],o[l]=r[4*l+1];this.up.set(e,a[0],a[1],a[2]),this.right.set(e,o[0],o[1],o[2])}},f.pan=function(e,t,n,i){t=t||0,n=n||0,i=i||0,this.recalcMatrix(e);var r=this.computedMatrix,s=(Math.exp(this.computedRadius[0]),r[1]),a=r[5],o=r[9],c=l(s,a,o);s/=c,a/=c,o/=c;var u=r[0],h=r[4],v=r[8],f=u*s+h*a+v*o,d=l(u-=s*f,h-=a*f,v-=o*f),p=(u/=d)*t+s*n,m=(h/=d)*t+a*n,x=(v/=d)*t+o*n;this.center.move(e,p,m,x);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+i),this.radius.set(e,Math.log(b))},f.translate=function(e,t,n,i){this.center.move(e,t||0,n||0,i||0)},f.setMatrix=function(e,t,n,i){var s=1;"number"==typeof n&&(s=0|n),(s<0||s>3)&&(s=1);var a=(s+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var o=t[s],c=t[s+4],h=t[s+8];if(i){var v=Math.abs(o),f=Math.abs(c),d=Math.abs(h),p=Math.max(v,f,d);v===p?(o=o<0?-1:1,c=h=0):d===p?(h=h<0?-1:1,o=c=0):(c=c<0?-1:1,o=h=0)}else{var m=l(o,c,h);o/=m,c/=m,h/=m}var x,b,y=t[a],g=t[a+4],M=t[a+8],w=y*o+g*c+M*h,P=l(y-=o*w,g-=c*w,M-=h*w),k=c*(M/=P)-h*(g/=P),_=h*(y/=P)-o*M,R=o*g-c*y,T=l(k,_,R);if(k/=T,_/=T,R/=T,this.center.jump(e,j,W,G),this.radius.idle(e),this.up.jump(e,o,c,h),this.right.jump(e,y,g,M),2===s){var z=t[1],L=t[5],E=t[9],A=z*y+L*g+E*M,S=z*k+L*_+E*R;x=U<0?-Math.PI/2:Math.PI/2,b=Math.atan2(S,A)}else{var D=t[2],q=t[6],B=t[10],U=D*o+q*c+B*h,C=D*y+q*g+B*M,I=D*k+q*_+B*R;x=Math.asin(u(U)),b=Math.atan2(I,C)}this.angle.jump(e,b,x),this.recalcMatrix(e);var F=t[2],N=t[6],V=t[10],H=this.computedMatrix;r(H,t);var O=H[15],j=H[12]/O,W=H[13]/O,G=H[14]/O,Y=Math.exp(this.computedRadius[0]);this.center.jump(e,j-F*Y,W-N*Y,G-V*Y)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},f.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},f.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},f.lookAt=function(e,t,n,i){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter;var r=(i=i||this.computedUp)[0],s=i[1],a=i[2],o=l(r,s,a);if(!(o<1e-6)){r/=o,s/=o,a/=o;var c=t[0]-n[0],h=t[1]-n[1],v=t[2]-n[2],f=l(c,h,v);if(!(f<1e-6)){c/=f,h/=f,v/=f;var d=this.computedRight,p=d[0],m=d[1],x=d[2],b=r*p+s*m+a*x,y=l(p-=b*r,m-=b*s,x-=b*a);if(!(y<.01&&(y=l(p=s*v-a*h,m=a*c-r*v,x=r*h-s*c))<1e-6)){p/=y,m/=y,x/=y,this.up.set(e,r,s,a),this.right.set(e,p,m,x),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(f));var g=s*x-a*m,M=a*p-r*x,w=r*m-s*p,P=l(g,M,w),k=r*c+s*h+a*v,_=p*c+m*h+x*v,R=(g/=P)*c+(M/=P)*h+(w/=P)*v,T=Math.asin(u(k)),z=Math.atan2(R,_),L=this.angle._state,E=L[L.length-1],A=L[L.length-2];E%=2*Math.PI;var S=Math.abs(E+2*Math.PI-z),D=Math.abs(E-z),q=Math.abs(E-2*Math.PI-z);S<D&&(E+=2*Math.PI),q<D&&(E-=2*Math.PI),this.angle.jump(this.angle.lastT(),E,A),this.angle.set(e,z,T)}}}}},779:e=>{e.exports="#version 300 es\nprecision highp float;\n\nuniform vec3 u_Eye, u_Ref, u_Up;\nuniform vec2 u_Dimensions;\nuniform float u_Time;\n\nin vec2 fs_Pos;\nout vec4 out_Col;\n\nfloat pi = 3.14159265359;\nfloat degToRad = 3.14159265359 / 180.0;\n\nstruct MapQuery\n{\n  float dist;\n  float displacement;\n  float material;\n};\n\nstruct Material\n{\n    vec3 color;\n    float kd;\n    float ks;\n    float cosPow;\n    float displacement;\n};\n\nstruct PointLight\n{\n    vec3 position;\n    vec3 color;\n    bool castsShadow;\n};\n\nfloat hash3(vec3 v)\n{\n    return fract(sin(dot(v, vec3(24.51853, 4815.44774, 32555.33333))) * 3942185.3);\n}\n\nvec4 noise3(vec3 v)\n{\n    //Adapted from IQ: https://www.iquilezles.org/www/articles/morenoise/morenoise.htm\n    vec3 intV = floor(v);\n    vec3 fractV = fract(v);\n    vec3 u = fractV*fractV*fractV*(fractV*(fractV*6.0-15.0)+10.0);\n    vec3 du = 30.0*fractV*fractV*(fractV*(fractV-2.0)+1.0);\n    \n    float a = hash3( intV+vec3(0.f,0.f,0.f) );\n    float b = hash3( intV+vec3(1.f,0.f,0.f) );\n    float c = hash3( intV+vec3(0.f,1.f,0.f) );\n    float d = hash3( intV+vec3(1.f,1.f,0.f) );\n    float e = hash3( intV+vec3(0.f,0.f,1.f) );\n    float f = hash3( intV+vec3(1.f,0.f,1.f) );\n    float g = hash3( intV+vec3(0.f,1.f,1.f) );\n    float h = hash3( intV+vec3(1.f,1.f,1.f) );\n    \n    float k0 =   a;\n    float k1 =   b - a;\n    float k2 =   c - a;\n    float k3 =   e - a;\n    float k4 =   a - b - c + d;\n    float k5 =   a - c - e + g;\n    float k6 =   a - b - e + f;\n    float k7 = - a + b + c - d + e - f - g + h;\n    \n    \n    vec3 dv = 2.0* du * vec3( k1 + k4*u.y + k6*u.z + k7*u.y*u.z,\n                             k2 + k5*u.z + k4*u.x + k7*u.z*u.x,\n                             k3 + k6*u.x + k5*u.y + k7*u.x*u.y);\n    \n    return vec4(-1.f+2.f*(k0 + k1*u.x + k2*u.y + k3*u.z + k4*u.x*u.y + k5*u.y*u.z + k6*u.z*u.x + k7*u.x*u.y*u.z), dv);\n}\n\nvec4 fbm3(vec3 v, int octaves, float amp, float freq, float pers, float freq_power)\n{\n    float sum = 0.f;\n    vec3 dv = vec3(0.f,0.f,0.f);\n    float speed = 0.01f;\n    for(int i = 0; i < octaves; ++i)\n    {\n        amp *= pers;\n        freq *= freq_power;\n        vec4 noise = noise3((v) * freq);\n        sum += amp * noise.x;\n        dv += amp * noise.yzw;\n    }\n    return vec4(sum, dv);\n}\n\nMapQuery smoothMin( MapQuery a, MapQuery b, float k)\n{\n    float h = clamp( 0.5+0.5*(b.dist-a.dist)/k, 0.0, 1.0 );\n    MapQuery res;\n    if(h < 0.5) {\n        res.dist = mix( b.dist, a.dist, h ) - k*h*(1.0-h);\n        res.material = b.material;\n    } else {\n        res.dist = mix( b.dist, a.dist, h ) - k*h*(1.0-h);\n        res.material = a.material;\n    }\n    return res;\n}\n\nvec2 smin( vec2 a, vec2 b, float k )\n{\n    float h = clamp( 0.5+0.5*(b.x-a.x)/k, 0.0, 1.0 );\n    if(h < 0.5) {\n        return vec2(mix( b.x, a.x, h ) - k*h*(1.0-h), b.y);\n    } else {\n        return vec2(mix( b.x, a.x, h ) - k*h*(1.0-h), a.y);\n    }\n}\n\nvec2 smax( vec2 a, vec2 b, float k )\n{\n    float h = max(k-abs(a.x-b.x),0.0);\n    return (a.x > b.x ? vec2((a.x + h*h*0.25/k), a.y) : vec2((b.x + h*h*0.25/k), b.y));\n}\n\n\nvec3 elongate( vec3 p, vec3 h )\n{\n    vec3 q = p - clamp( p, -h, h );\n    return q;\n}\nfloat cappedCone(vec3 p, vec3 a, vec3 b, float ra, float rb)\n{\n    float rba  = rb-ra;\n    float baba = dot(b-a,b-a);\n    float papa = dot(p-a,p-a);\n    float paba = dot(p-a,b-a)/baba;\n    float x = sqrt( papa - paba*paba*baba );\n    float cax = max(0.0,x-((paba<0.5)?ra:rb));\n    float cay = abs(paba-0.5)-0.5;\n    float k = rba*rba + baba;\n    float f = clamp( (rba*(x-ra)+paba*baba)/k, 0.0, 1.0 );\n    float cbx = x-ra - f*rba;\n    float cby = paba - f;\n    float s = (cbx < 0.0 && cay < 0.0) ? -1.0 : 1.0;\n    return s*sqrt( min(cax*cax + cay*cay*baba,\n                       cbx*cbx + cby*cby*baba) );\n}\n\nfloat roundCone(vec3 p, vec3 a, vec3 b, float r1, float r2)\n{\n    // sampling independent computations (only depend on shape)\n    vec3  ba = b - a;\n    float l2 = dot(ba,ba);\n    float rr = r1 - r2;\n    float a2 = l2 - rr*rr;\n    float il2 = 1.0/l2;\n    \n    // sampling dependant computations\n    vec3 pa = p - a;\n    float y = dot(pa,ba);\n    float z = y - l2;\n    float x2 = dot( pa*l2 - ba*y, pa*l2 - ba*y );\n    float y2 = y*y*l2;\n    float z2 = z*z*l2;\n\n    // single square root!\n    float k = sign(rr)*rr*rr*x2;\n    if( sign(z)*a2*z2 > k ) return  sqrt(x2 + z2)        *il2 - r2;\n    if( sign(y)*a2*y2 < k ) return  sqrt(x2 + y2)        *il2 - r1;\n                            return (sqrt(x2*a2*il2)+y*rr)*il2 - r1;\n}\n\n// Ra: radius rb: roundedness h: height\nfloat roundedCylinder( vec3 p, float ra, float rb, float h )\n{\n  vec2 d = vec2( length(p.xz)-2.0*ra+rb, abs(p.y) - h );\n  return min(max(d.x,d.y),0.0) + length(max(d,0.0)) - rb;\n}\n\nfloat cappedTorus(vec3 p, vec2 sc, float ra, float rb)\n{\n  p.x = abs(p.x);\n  float k = (sc.y*p.x>sc.x*p.y) ? dot(p.xy,sc) : length(p.xy);\n  return sqrt( dot(p,p) + ra*ra - 2.0*ra*k ) - rb;\n}\n\nfloat box( vec3 p, vec3 b )\n{\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);\n}\n\n\nfloat sphere(vec3 p, float s)\n{\n    return length(p) - s;\n}\n\nfloat ellipsoid( vec3 p, vec3 r )\n{\n    float k0 = length(p/r);\n    float k1 = length(p/(r*r));\n    return k0*(k0-1.0)/k1;\n}\n\nfloat stick(vec3 p, vec3 a, vec3 b, float r1, float r2)\n{\n    vec3 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return  length( pa - ba*h ) - mix(r1,r2,h*h*(3.0-2.0*h));\n}\n\n\nvec3 bend( vec3 p, float k )\n{\n    float c = cos(k*p.x);\n    float s = sin(k*p.x);\n    mat2  m = mat2(c,-s,s,c);\n    vec3  q = vec3(m*p.xy,p.z);\n    return q;\n}\n\n\nvec3 twist( vec3 p, float k)\n{\n    float c = cos(k*p.y);\n    float s = sin(k*p.y);\n    mat2  m = mat2(c,-s,s,c);\n    vec3  q = vec3(m*p.xz,p.y);\n    return q;\n}\n\nfloat onion(float sdf, float thickness)\n{\n    return abs(sdf) - thickness;\n}\n\nfloat roundBox( vec3 p, vec3 b, float r )\n{\n  vec3 q = abs(p) - b;\n  return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0) - r;\n}\n\n// https://iquilezles.org/www/articles/noacos/noacos.htm\nmat3 rotationAxisAngle( vec3 v, float a )\n{\n    float si = sin( a );\n    float co = cos( a );\n    float ic = 1.0f - co;\n\n    return mat3( v.x*v.x*ic + co,       v.y*v.x*ic - si*v.z,    v.z*v.x*ic + si*v.y,\n                   v.x*v.y*ic + si*v.z,   v.y*v.y*ic + co,        v.z*v.y*ic - si*v.x,\n                   v.x*v.z*ic - si*v.y,   v.y*v.z*ic + si*v.x,    v.z*v.z*ic + co );\n}\n\nfloat plane( vec3 p, vec3 n, float h )\n{\n  // n must be normalized\n  return dot(p,n) + h;\n}\n\nfloat getBias(float time, float bias)\n{\n    return (time / ((((1.0/bias) - 2.0)*(1.0 - time))+1.0));\n}\n\nfloat getGain(float time,float gain)\n{\n  if(time < 0.5)\n    return getBias(time * 2.0,gain)/2.0;\n  else\n    return getBias(time * 2.0 - 1.0,1.0 - gain)/2.0 + 0.5;\n}\n\n\n\nvec2 map(vec3 p)\n{\n//    if (abs(p.z) > 60.0 || abs(p.x) > 30.0 || abs(p.y) > 30.0)\n//    {\n//        return vec2(10000.0, 0.0);\n//    }\n    \n    float modTime = mod(u_Time, 100.0 * pi);\n    vec3 symP = vec3(abs(p.x), p.yz);\n    //TODO: calculate these matrices on CPU or vert shader\n    mat3 rot = rotationAxisAngle(normalize(vec3(1.0, 0.0, 0.0)), degToRad * 10.0);\n    vec2 face = vec2(sphere(p + vec3(0.0, -0.8, 0.0), 1.2), 0.0);\n    vec3 rotP = rot * (p - vec3(0.0,0.9,-0.63));\n    face = smin(face, vec2(ellipsoid(p - vec3(0.0,0.0,-0.4), vec3(1.15, 1.3, 1.0)), 0.0), 0.2);\n    // Forehead\n    face = smin(face, vec2(roundBox(rotP, vec3(0.6, 0.2, 0.55), 0.2), 0.0), 0.6);\n    // Chin\n    face = smin(face, vec2(sphere(p + vec3(0.0, 0.98, 0.89), 0.33), 0.0), 0.3);\n    // Eye socket\n    face = smax(face, -vec2(sphere(symP + vec3(-0.5, -0.46, 1.2), 0.15), 0.0), 0.4);\n\n    vec3 eyePos = vec3(-0.05, 0.03, 0.15);\n    //eyelids\n    //top eyelid\n    vec3 blinkOffset = vec3(0.0, 0.1 + -0.2 * abs(sin(0.05 * modTime)), 0.0);\n    //blinkOffset.y = 0.1;\n    face = smin(face, vec2(stick(symP, vec3(0.4, 0.52, -1.3) + eyePos, vec3(0.75, 0.53, -1.28) + eyePos, 0.075, 0.075), 0.0), 0.07);\n    \n    face = smin(face, vec2(stick(symP, vec3(0.4, 0.52, -1.3) + eyePos + blinkOffset, vec3(0.7, 0.53, -1.28) + eyePos + blinkOffset, 0.075, 0.075), 0.0), 0.05);\n\n    // low eyelid\n    face = smin(face, vec2(stick(symP, vec3(0.76, 0.31, -1.15) + eyePos, vec3(0.3, 0.27, -1.37) + eyePos, 0.05, 0.05), 0.0), 0.08);\n    face = smin(face, vec2(sphere(symP + vec3(-0.45, -0.04, 0.88), 0.36), 0.0), 0.15);\n\n    // Eyeball\n    vec3 eyeballPos = symP + vec3(-0.5, -0.44, 0.99);\n    vec2 eyeball = vec2(sphere(eyeballPos, 0.19), 3.0);\n    float pupilDist = length(eyeballPos.xy);\n    // Iris\n    if(pupilDist < 0.08 && pupilDist > 0.045) {\n        eyeball.y = 6.0;\n    }\n    face = smin(face, eyeball, 0.0);\n    \n    // Cheekbones\n    face = smin(face, vec2(stick(symP, vec3(0.92, 0.22, -0.64), vec3(0.52, -0.38, -0.84), 0.2, 0.25), 0.0), 0.24);\n    // Hair Loop\n    vec3 earOffset = vec3(-0.1, 0.0, 0.16);\n    vec3 earP = elongate(symP + earOffset, vec3(0.05, 0.18, 0.1));\n    earP.x += 0.01 * sin(10.0 * symP.y);\n    earP.y += 0.02 * sin(5.0 * symP.y);\n\n    vec2 ear = vec2(roundCone(earP, vec3(1.1, 0.24, -0.06), vec3(0.96, 0.04, -0.16), 0.15, 0.14), 0.0);\n    face = smin(face, ear, 0.1);\n\n    earP = elongate(symP + earOffset, vec3(0.01, 0.21, 0.06));\n    earP.x += 0.01 * sin(20.0 * symP.y);\n    earP.z += 0.026 * sin(30.0 * symP.x);\n    \n    vec2 earCut = vec2(-roundCone(earP, vec3(1.29, 0.26, -0.06), vec3(1.26, 0.15, -0.16), 0.14, 0.19), 0.0);\n    face = smax(face, earCut, 0.1);\n\n    \n    vec3 bentSymP = bend(symP, -0.7);\n    rot = rotationAxisAngle(normalize(vec3(0.8, 0.0, 1.0)), -degToRad * 60.0);\n    \n    vec3 rotSymP = rot * (symP + vec3(-1.7, -2.4, -0.3));\n    rotSymP = bend(rotSymP, 0.05);\n    rotSymP += 0.05 * sin(length(rotSymP * 4.0)) + 0.05 * cos(p * 3.5);\n\n    vec2 hair = vec2(roundedCylinder(rotSymP, 1.1, 0.3, 0.1), 1.0);\n    \n    //scalp hair\n    hair = smin(hair, vec2(sphere(symP + vec3(-0.3, -1.2, -0.3), 1.33), 1.0), 0.4);\n    face = smin(face, hair, 0.1);\n    vec3 twistPos = p;\n    twistPos.xz += 0.03 * abs(sin(30.0 * p.y));\n    vec2 neck = vec2(stick(twistPos, vec3(0.0, -0.4, 0.4), vec3(0.0, -2.8, 0.8), 0.8, 1.0), 2.0);\n    face = smin(face, neck, 0.1);\n    \n    //lips\n    vec3 lipPos = p + vec3(0.0, 0.49, 1.18);\n    float xStretch = lipPos.x * 9.0;\n    \n    // Quadratic curve for lips\n    float offset = -0.03 -0.08 * ((xStretch * xStretch * xStretch * xStretch) - 1.7 * (xStretch * xStretch));\n    vec2 lip = vec2(roundBox(lipPos + vec3(0.0, -offset * 0.5, 0.0), vec3(0.16, 0.5 * offset + 0.01  * clamp(1.0 - (abs(lipPos.x * 200.0 * lipPos.x)), 0.0, 1.0), 0.1), 0.1), 0.0);\n    \n    //lipPos.y -= 0.01;\n    lipPos = p + vec3(0.0, 0.52, 1.19);\n\n    vec2 upperLip = vec2(roundBox(lipPos, vec3(0.2, 0.02, max(0.1 - abs(0.12 * p.x), 0.02)), 0.05), 0.0);\n    lip = smin(lip, upperLip, 0.02);\n    \n    lipPos = p + vec3(0.0, 0.64, 1.14);\n    float lipFunc = -10.0 * lipPos.x * lipPos.x + 0.4;\n    if(lipFunc > lipPos.y) {\n        lip.y = 4.0;\n    }\n\n    lipPos = p + vec3(0.0, 0.64, 1.14);\n    lipFunc = 10.0 * lipPos.x * lipPos.x - 0.2;\n    \n    lipPos.y += 0.03 * (cos(13.0 * lipPos.x));\n    \n    vec2 lowerLip = vec2(roundBox(lipPos, vec3(0.13, 0.003, 0.1), 0.1), 0.0);\n    \n    if(lipFunc < lipPos.y) {\n        lowerLip.y = 4.0;\n    }\n    \n    lip = smin (lip, lowerLip, 0.002);\n    face = smin(face, lip, 0.01);\n\n    vec3 nosePos = vec3(0.0, -0.1, 0.0);\n    vec2 nose = vec2(sphere(p + vec3(0.0,-0.02,1.55) - nosePos, 0.135), 0.0);\n    \n    // Nose bridge\n    nose = smin(nose, vec2(stick(p, vec3(0.0, 0.5, -1.3) + nosePos, vec3(0.0, 0.14, -1.42) + nosePos, 0.11, 0.13), 0.0), 0.12);\n    \n    // Nose sides\n    nose = smin(nose, vec2(stick(symP, vec3(0.1, 0.0, -1.55) + nosePos, vec3(0.13, -0.1, -1.45) + nosePos, 0.06, 0.06), 0.0), 0.09);\n    face = smin(face, nose, 0.07);\n\n    //body\n    vec3 robeOffset = vec3(0.0, -0.4, -0.6);\n    vec3 robeP = (p - vec3(0.0, -3.0, 0.0) + robeOffset);\n    float fold = 0.1 * (getGain(0.5 * (sin(0.1 * modTime + p.x) + 1.0), 0.4));\n    fold += 0.02 * sin(-p.y * 4.3 + p.x * 3.7);\n    //fold += 0.01 * sin(0.5 + -p.y * 2.4 + symP.x * symP.x * 3.0);\n\n    robeP.z += fold;\n    robeP = elongate(robeP, vec3(1.0, 0.0, 0.0));\n        \n        \n        \n    vec2 robe = vec2(cappedCone(robeP, vec3(0.0, 2.6, 0.4), vec3(0.0, -3.4, -0.5), 2.4, 1.4), 5.0);\n    if (robe.x < 0.0) {\n        robe.y = 4.0;\n    }\n    \n    vec3 foldP = p - vec3(0.0, -13.4, 0.9);\n    foldP.z += 0.2 * (getGain(0.5 * (sin(0.1 * modTime + p.x) + 1.0), 0.4) - 0.5) * 2.0;\n\n    vec2 bottomRobe = vec2(roundBox(foldP, vec3(1.4, 6.9, 0.7), 1.6), 5.0);\n    \n    bottomRobe.x += 0.001 * (0.5 * sin(p.x * 2.0) + sin(p.y * 1.0) + 2.0 * sin(p.z * 0.5));\n    bottomRobe.x = onion(bottomRobe.x, abs(bottomRobe.x) * 0.1);\n    bottomRobe = smin(bottomRobe, vec2(cappedCone(p, vec3(0.0, -16.6, 0.9), vec3(0.0, -22.9, -0.5), 2.1, 4.8), 5.0), 0.9);\n\n    foldP = elongate(p, vec3(3.0, 0.0, 0.0));\n    foldP += 0.2 * (sin(0.1 * modTime + p.x) + 1.0);\n    //foldP.y += 0.3 * sin(0.1 * modTime + p.x);\n    vec2 robeFolds = vec2(cappedCone(foldP, vec3(0.0, -18.9, 0.9), vec3(0.0, -22.4, 0.6), 0.4, 6.0), 5.0);\n    vec2 redRobeFolds = vec2(cappedCone(foldP, vec3(0.0, -20.5, 0.1), vec3(0.0, -22.4, -0.0), 0.4, 6.3), 4.0);\n    bottomRobe = smin(bottomRobe, robeFolds, 0.3);\n    bottomRobe = smin(bottomRobe, redRobeFolds, 0.3);\n\n    robe = smin(robe, bottomRobe, 0.1);\n    vec2 insideRobe = robe.xy;\n\n    //body\n    vec2 body = smax(insideRobe, vec2(ellipsoid(p - vec3(0.0,-3.7,0.9), vec3(4.0, 1.4, 1.9)), 0.0), 0.01);\n    face = smin(face, body, 0.1);\n    robe.x = onion(robe.x, 0.03);\n    \n    vec2 belt = vec2(onion(robe.x, 0.1), 7.0);\n    belt = smax(belt, vec2(roundBox(p - vec3(0.0, -4.5, 0.0), vec3(2.5, 0.9, 3.0), 0.01), 7.0), 0.01);\n    robe = smin(robe, belt, 0.001);\n    \n    vec3 bicepFold = symP;\n    bicepFold.z += 0.05 * sin(0.1 * p.x + 0.1 + 5.0 * symP.x - 2.5 * symP.y);\n    bicepFold.z += 0.01 * sin(0.5 + 12.0 * symP.x - 5.0 * symP.y);\n\n    vec3 longP = p - vec3(4.0, -6.0, -0.7);//elongate(p - vec3(4.0, -6.0, -0.7), vec3(0.0, 0.4, 0.0));\n    vec2 bicep = vec2(stick(bicepFold, vec3(2.3, -2.6, 0.4), vec3(4.0, -5.6, -1.3), 0.7, 0.9), 5.0);\n    bicep = smax(bicep, -insideRobe, 0.2);\n    //robe = smin(robe, bicep, 0.2);\n    vec3 sleeveP = symP - vec3(4.0, -6.0, -0.7);\n    sleeveP += 0.03 * (sin(0.3 * modTime + p.x * 3.0 + p.y) + 1.0);\n    sleeveP += 0.04 * sin(p.x * 2.7  + p.y * 3.0 + p.z * 1.0);\n    vec2 sleeve = vec2(cappedCone(sleeveP, vec3(0.0, 0.0, -0.6), vec3(-4.4, -0.8, -4.0), 0.9, 1.8), 5.0);\n    if (sleeve.x < 0.0) {\n        sleeve.y = 4.0;\n    }\n    \n    sleeve.x = onion(sleeve.x, 0.09);\n    rot = rotationAxisAngle(vec3(0.0, 1.0, 0.0), -degToRad * 10.0);\n    \n    // Cut out sleeves using box\n    rotP = symP - vec3(0.0, -4.0, -4.5);\n    rotP.x += 0.05 * getBias((sin(0.3 * modTime + 4.0 * rotP.y) + 1.0) * 0.5, 0.6);\n    \n    rotP = rot * (rotP);\n    sleeve = smax(sleeve, vec2(-roundBox(rotP, vec3(0.2, 5.0, 4.0), 0.1), 3.0), 0.1);\n        \n    longP = p - vec3(-4.0, -6.0, -0.7);\n    \n    vec2 lWrist = vec2(cappedCone(p - vec3(4.0, -5.2, -1.5), vec3(-3.0, -0.4, -1.7), vec3(-5.4, -0.4, -2.5), 0.3, 0.4), 0.0);\n    vec2 rWrist = vec2(cappedCone(p - vec3(-4.0, -5.3, -1.6), vec3(3.0, -0.6, -1.8), vec3(5.4, -0.4, -1.5), 0.4, 0.4), 0.0);\n\n    sleeve = smin(lWrist, sleeve, 0.01);\n    sleeve = smin(rWrist, sleeve, 0.01);\n\n    vec2 arm = smin(bicep, sleeve, 0.5);\n    robe = smin(robe, arm, 0.01);\n    // Cut off top of robe\n    vec3 clothP = p - vec3(0.0, 2.45, 0.0);\n    clothP.y += 0.03 * sin(0.3 * modTime + 4.0 * clothP.x);\n    robe = smax(robe, vec2(-roundBox(clothP, vec3(4.0, 2.9, 4.5), 0.01), 0.0), 0.01);\n    rot = rotationAxisAngle(vec3(0.0, 0.0, 1.0), degToRad *  45.0);\n    rotP = rot * (p - vec3(0.0, 1.0, -1.2) + robeOffset);\n        rotP += 0.02 * sin(0.3 + p.x * 2.0 + p.y * 3.2);\n        rotP += 0.02 * sin(0.9 + p.x * 2.0 - p.y * 1.2);\n\n    //Cut out vneck\n    robe = smax(robe, vec2(-roundBox(rotP, vec3(3.5, 3.5, 1.0), 0.01), 0.0), 0.01);\n    face = smin(face, robe, 0.01);\n      /*\n    vec2 testSphere = vec2(sphere(symP - vec3(2.0, 2.5, 0.0), 0.3), 0.0);\n        face = smin(face, testSphere, 0.01);*/\n        return face;\n\n    \n}\n\nvec2 boundedMap(vec3 p)\n{\n    vec2 boundingBox = vec2(box(p - vec3(0.0,-7.4,0.0), vec3(9.5,16.0,9.0)), 0.0);\n    if(boundingBox.x < 0.001) {\n        return map(p);\n    }\n    return boundingBox;\n\n}\n\nvec3 calcNormals(vec3 p)\n{\n    float epsilon = 0.00001;\n    return normalize(vec3(boundedMap(p + vec3(epsilon, 0.0, 0.0)).x - boundedMap(p - vec3(epsilon, 0.0, 0.0)).x, boundedMap(p + vec3(0.0, epsilon, 0.0)).x - boundedMap(p - vec3(0.0, epsilon, 0.0)).x, boundedMap(p + vec3(0.0, 0.0, epsilon)).x - boundedMap(p - vec3(0.0, 0.0, epsilon)).x));\n    \n}\n\nvec4 raycast(vec3 origin, vec3 dir, int maxSteps)\n{\n    float t = 0.0;\n\n    for(int i = 0; i < maxSteps; ++i)\n    {\n        vec3 p = origin + t * dir;\n        vec2 dist = boundedMap(p);\n\n        if (abs(dist.x) < 0.001) {\n            return vec4(p, dist.y);\n        }\n        \n        t += dist.x;\n        if(t > 60.0) {\n            return vec4(0.0, 0.0, 0.0, -100.0);\n\n        }\n    }\n    \n    return vec4(0.0, 0.0, 0.0, -100.0);\n}\n\nfloat softShadow(vec3 origin, vec3 dir, float minT, float maxT, float k)\n{\n    float res = 1.0;\n    float ph = 1e20;\n\n    for(float t = minT; t < maxT; )\n    {\n        vec3 p = origin + t * dir;\n        vec2 dist = map(p);\n        if (abs(dist.x) < 0.0001) {\n            return 0.0;\n        }\n        /*\n        float y = dist.x*dist.x/(2.0*ph);\n        float d = sqrt(dist.x*dist.x-y*y);\n        res = min( res, k*d/max(0.0,t-y) );\n        ph = dist.x;*/\n        res = min( res, k * dist.x / t );\n        t += dist.x;\n\n    }\n    \n    return res;\n\n}\n\nfloat flower(vec2 p, float r, float numPetals, float petalSize, float rotation)\n{\n    float angle = atan(p.y, p.x) + rotation;\n    float rPetals = petalSize * (r + abs(cos(numPetals * angle)));\n    return length(p) - rPetals;\n}\n\nfloat circle2d( vec2 p, float r )\n{\n    return length(p) - r;\n}\n\nfloat box2d( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nfloat orientedBox2d( in vec2 p, in vec2 a, in vec2 b, float th )\n{\n    float l = length(b-a);\n    vec2  d = (b-a)/l;\n    vec2  q = (p-(a+b)*0.5);\n          q = mat2(d.x,-d.y,d.y,d.x)*q;\n          q = abs(q)-vec2(l,th)*0.5;\n    return length(max(q,0.0)) + min(max(q.x,q.y),0.0);\n}\n\nMaterial robePattern(vec2 uv)\n{\n    Material matRes;\n    float modTime = mod(u_Time, 100.0 * pi);\n    vec4 fbm = fbm3(uv.xyy + vec3(0.0, 0.0, 0.0), 5, 1.0, 1.5, 0.4, 2.0);\n   // fbm.x = 0.0;\n    vec2 centerUv = uv - vec2(0.5);\n    \n    centerUv.x += 0.2 * sin(8.0 * centerUv.y);// + 0.7 * fbm.x;\n    centerUv.x += 0.7 * fbm.x;\n    centerUv.y += 0.2 * fbm.x;\n\n    float growthTime = sin(0.04 * modTime);\n\n    float res = box2d(centerUv, vec2(0.03, abs(growthTime) * 0.66));\n    res = min(res, orientedBox2d(centerUv, vec2(0.0, 0.0), growthTime * vec2(0.2, 0.3), 0.02));\n    res = min(res, orientedBox2d(centerUv, vec2(0.0, -0.1),growthTime *   vec2( -0.2, 0.3), 0.02));\n    res = min(res, orientedBox2d(centerUv, vec2(0.0, -0.2), growthTime * vec2(  -0.6, 0.4), 0.04));\n    res = min(res, orientedBox2d(centerUv, vec2(0.0, -0.4),  growthTime * vec2(-0.6, 0.1), 0.04));\n    \n    centerUv = uv - vec2(0.5);\n    centerUv += 0.1 * fbm.x;\n    float growthSign = sign(growthTime);\n    float petalGrowth = abs(growthTime * 0.05);\n    //res = min(res, circle2d(centerUv - vec2(0.0, 0.01), petalGrowth));\n    res = min(res, flower(centerUv - vec2(-0.02 * growthSign, -0.0), 0.8, 3.0, petalGrowth * 1.3, growthTime));\n    res = min(res, flower(centerUv - vec2(0.3 * growthSign, -0.2), 0.5, 2.5, petalGrowth * 0.8, growthTime));\n    res = min(res, (res, flower(centerUv - vec2(0.1 * growthSign, 0.4), 0.8, 2.5, petalGrowth * 0.9, growthTime)));\n    \n    matRes.color = vec3(198.0,211.0,240.0) / 255.0;\n    matRes.kd = 0.9;\n    matRes.ks = 0.3;\n    matRes.cosPow = 5.0;\n    matRes.displacement = -0.8 * fbm.x;\n    if (res < 0.0001) {\n        matRes.kd = 1.0;\n        matRes.ks = 1.0;\n        matRes.cosPow = 40.0;\n        matRes.displacement += -20.0 * abs(res);\n        matRes.color =  mix(vec3(78.0,130.0,200.0) / 255.0, vec3(88.0,163.0,240.0) / 255.0, (uv.y));\n    }\n    \n    float whiteFlowers = flower(centerUv - vec2(0.02, -0.1), 0.7, 3.0, petalGrowth, 2.0 * growthTime);\n    whiteFlowers = min(whiteFlowers, (res, flower(centerUv - vec2(-0.2 * growthSign, 0.2), 0.8, 2.5, petalGrowth * 0.6, growthTime)));\n    whiteFlowers = min(whiteFlowers, flower(centerUv - vec2(0.25 * growthSign, 0.3), 0.8, 3.0, petalGrowth * 1.1, growthTime));\n    whiteFlowers = min(whiteFlowers, flower(centerUv - vec2(-0.0 * growthSign, -0.3), 0.8, 3.0, petalGrowth * 1.0, growthTime));\n\n    if (whiteFlowers < 0.0001) {\n        matRes.kd = 1.0;\n        matRes.ks = 1.5;\n        matRes.cosPow = 30.0;\n        matRes.displacement += -20.0 * abs(whiteFlowers);\n        matRes.color =  mix(vec3(200.0,240.0,250.0) / 255.0, vec3(230.0,240.0,250.0) / 255.0, (uv.y));\n    }\n    \n    return matRes;\n}\n\n//https://stackoverflow.com/questions/34644101/calculate-surface-normals-from-depth-image-using-neighboring-pixels-cross-produc\nvec3 calcRobeNormals(vec2 uv)\n{\n    float epsilon = 0.01;\n    Material left = robePattern(vec2(uv.x - epsilon, uv.y));\n    Material right = robePattern(vec2(uv.x + epsilon, uv.y));\n    Material up = robePattern(vec2(uv.x, uv.y - epsilon));\n    Material down = robePattern(vec2(uv.x, uv.y + epsilon));\n    \n    float dzdx = (right.displacement - left.displacement) * 0.5;\n    float dzdy = (up.displacement - down.displacement) * 0.5;\n    \n    return normalize(vec3(-dzdx, -dzdy, 1.0f));\n\n}\n\nMaterial beltPattern(vec2 uv)\n{\n    Material matRes;\n    vec4 fbm = fbm3(uv.xyy + vec3(0.0, 0.0, 0.0), 5, 1.0, 1.5, 0.4, 2.0);\n\n    float threshold = abs(cos(uv.x * 10.0));\n    float dispThreshold = 2.0 * (threshold - 0.5);\n    matRes.displacement = fbm.x * 3.0;\n    if (threshold > 0.3) {\n        matRes.ks = 1.0;\n        matRes.kd = 1.0;\n        matRes.cosPow = 20.0;\n        matRes.color = vec3(0.62, 0.43, 0.6);\n        matRes.displacement += (threshold - 0.3) * 10.0;\n\n    } else {\n        matRes.kd = 0.9;\n        matRes.ks = 0.9;\n        matRes.color = vec3(0.9, 0.54, 0.5);\n        matRes.cosPow = 60.0;\n        matRes.displacement += (0.3 - threshold) * 10.0;\n    }\n    matRes.displacement += -4.0 * getBias(abs(sin((1.2 * uv.x + uv.y) * 10.0)), 0.8);\n    \n    return matRes;\n}\n\nvec3 calcBeltNormals(vec2 uv)\n{\n    float epsilon = 0.002;\n    Material left = beltPattern(vec2(uv.x - epsilon, uv.y));\n    Material right = beltPattern(vec2(uv.x + epsilon, uv.y));\n    Material up = beltPattern(vec2(uv.x, uv.y - epsilon));\n    Material down = beltPattern(vec2(uv.x, uv.y + epsilon));\n    \n    float dzdx = (right.displacement - left.displacement) * 0.5;\n    float dzdy = (up.displacement - down.displacement) * 0.5;\n    \n    return normalize(vec3(-dzdx, -dzdy, 1.0f));\n\n}\n\nMaterial hairPattern(vec2 uv)\n{\n    Material resMat;\n    resMat.color = vec3(0.18, 0.16, 0.21);\n    resMat.ks = 1.3;\n    resMat.cosPow = 8.0;\n    resMat.kd = 0.2;\n    /*\n    resMat.displacement = 0.4 * mod(uv.x * 7.0, 1.5);\n    resMat.displacement += 0.3 * mod(pi + uv.x * 9.0, 1.9);\n    resMat.displacement += 0.5 * mod(1.6 * pi + uv.x * 7.9, 2.1);\n*/\n    resMat.displacement = getBias(abs(0.3 * sin(uv.x * 26.0 + uv.y * 4.4)), 0.77);\n    resMat.displacement += getBias(abs(0.2 * sin(pi * 0.9 + uv.x * 27.0 + uv.y * 4.3)), 0.8);\n    resMat.displacement += 0.5 * sin(1.6 * pi + uv.x * 26.0 + uv.y * 4.3);\n\n    return resMat;\n    \n}\n\nvec3 calcHairNormals(vec2 uv)\n{\n    float epsilon = 0.01;\n    Material left = hairPattern(vec2(uv.x - epsilon, uv.y));\n    Material right = hairPattern(vec2(uv.x + epsilon, uv.y));\n    Material up = hairPattern(vec2(uv.x, uv.y - epsilon));\n    Material down = hairPattern(vec2(uv.x, uv.y + epsilon));\n    \n    float dzdx = (right.displacement - left.displacement) * 0.5;\n    float dzdy = (up.displacement - down.displacement) * 0.5;\n    \n    return normalize(vec3(-dzdx, -dzdy, 1.0f));\n\n}\n\nMaterial backgroundPattern(vec2 uv)\n{\n    float modTime = mod(u_Time, 100.0 * pi);\n\n    Material matRes;\n    vec4 fbm = fbm3(uv.xyy + vec3(0.0, 0.0, 0.0), 5, 1.0, 1.5, 0.4, 2.0);\n    vec2 centerUv = uv - vec2(0.5);\n    \n    centerUv.x += 0.2 * sin(8.0 * centerUv.y);// + 0.7 * fbm.x;\n    centerUv.x += 0.7 * fbm.x;\n    centerUv.y += 0.2 * fbm.x;\n\n    float growthTime = sin(0.04 * modTime);\n    float vines = box2d(centerUv, vec2(0.03, abs(growthTime) * 0.66));\n    float a = getBias((uv.y + 1.0) * 0.5, 0.68);\n    matRes.color = mix(vec3(0.58,0.6,0.72), vec3(0.92,0.95,0.96), a);\n    if(vines < 0.001) {\n        matRes.color = vec3(0.3, 0.01, 0.1);\n        matRes.displacement += vines;\n    }\n    \n    return matRes;\n}\n\nvec3 calcBackgroundNormals(vec2 uv)\n{\n    float epsilon = 0.01;\n    Material left = backgroundPattern(vec2(uv.x - epsilon, uv.y));\n    Material right = backgroundPattern(vec2(uv.x + epsilon, uv.y));\n    Material up = backgroundPattern(vec2(uv.x, uv.y - epsilon));\n    Material down = backgroundPattern(vec2(uv.x, uv.y + epsilon));\n    \n    float dzdx = (right.displacement - left.displacement) * 0.5;\n    float dzdy = (up.displacement - down.displacement) * 0.5;\n    \n    return normalize(vec3(-dzdx, -dzdy, 1.0f));\n\n}\n\nvoid main() {\n    float modTime = mod(u_Time, 100.0 * pi);\n\n    float fov = 22.5f;\n    float len = distance(u_Ref, u_Eye);\n    vec3 look = normalize(u_Ref - u_Eye);\n    vec3 right = normalize(cross(look, u_Up));\n    float aspect = u_Dimensions.x / u_Dimensions.y;\n    vec3 v = u_Up * len * tan(fov);\n    vec3 h = right * len * aspect * tan(fov);\n\n    vec3 p = u_Ref + fs_Pos.x * h + fs_Pos.y * v;\n    vec3 dir = normalize(p - u_Eye);\n    \n    vec3 lightPos = vec3(1.0, 0.6, -20.0);\n    \n    PointLight[3] pointLights;\n    pointLights[0] = PointLight(vec3(1.0, 20.0, -50.0), 0.9 * vec3(1.08,1.05,1.06), true);\n    pointLights[1] = PointLight(vec3(-100.0, 0.6, 6.0), 0.75 * vec3(0.2,0.3,0.38), false);\n    pointLights[2] = PointLight(vec3(80.0, 0.6, 4.0), 0.77 * vec3(0.2,0.3,0.4), false);\n\n    vec4 isect = raycast(u_Eye, dir, 128);\n    float a = getBias((fs_Pos.y + 1.0) * 0.5, 0.68);\n    \n    // Clear color\n    vec3 albedo = mix(vec3(0.58,0.6,0.72), vec3(0.92,0.95,0.96), a);\n    \n    /*vec2 pos_uv = fs_Pos;\n    pos_uv.y *= aspect;\n    Material m = backgroundPattern(pos_uv);\n    if(flower(fs_Pos.xy, 0.5, 3.0, 0.3, 1.0) < 0.001) {\n    }\n    albedo = m.color;\n\n    vec3 backgroundNormal = calcBackgroundNormals(fs_Pos);\n    vec3 lightBackground = normalize(vec3(1.0, 0.0, 1.0));\n    float diffuseBackground = clamp(dot(backgroundNormal, lightBackground), 0.0, 1.0);\n    vec3 col = diffuseBackground* albedo  ;*/\n    \n    vec3 col = albedo;\n    if(isect.w >= 0.0)\n    {\n        col = vec3(0.0);\n        vec3 normal = calcNormals(isect.xyz);\n        vec3 tangent = normalize(cross(vec3(0,1,0),normal));\n        vec3 bitangent = normalize(cross(normal, tangent));\n\n        mat3 tbn = mat3(tangent, bitangent, normal);\n        vec3 viewVec = normalize(isect.xyz - u_Eye.xyz);\n        float kd = 1.0;\n        float ks = 1.0;\n        float cosPow = 28.0;\n\n        if(isect.w == 0.0)\n        {\n            // Skin\n            ks = 0.2;\n            \n            float skinLerp = clamp(abs(isect.z * 1.2) - 0.9, 0.0, 1.0);\n            skinLerp = getBias(skinLerp, 0.6);\n            \n            albedo = vec3(0.7, 0.62, 0.67);\n\n            vec3 cheeks = vec3(0.6, -0.19, -0.74);\n            vec3 symIsect = vec3(abs(isect.x), isect.yz);\n            float cheekDist = distance(cheeks, symIsect);\n            cheekDist = clamp(cheekDist * 1.3, 0.0, 1.0);\n            albedo = mix(vec3(0.72, 0.42, 0.62), albedo, cheekDist);\n\n            cheeks = vec3(1.0, -0.36, -0.7);\n            cheekDist = clamp(distance(cheeks, symIsect) * 1.5,0.0,1.0);\n            albedo = mix(vec3(0.36, 0.21, 0.31), albedo, cheekDist);\n            \n            vec3 temples = vec3(0.85, 1.1, -1.09);\n            float templeDist = clamp(distance(temples, symIsect) * 1.5, 0.0, 1.0);\n            albedo = mix(vec3(0.3, 0.19, 0.4), albedo, templeDist);\n\n            vec3 chest = vec3(0.0, -1.8, -0.6);\n            float chestDist = clamp(distance(chest, symIsect) * 0.8, 0.0, 1.0);\n            albedo = mix(vec3(0.6, 0.33, 0.67), albedo, chestDist);\n            chestDist = clamp(distance(chest - vec3(0.0, 2.6, 0.0), symIsect) * 0.8, 0.0, 1.0);\n            albedo = mix(vec3(0.6, 0.33, 0.67), albedo, chestDist);\n\n            cosPow = 60.0;\n        } else if (isect.w <= 1.0) {\n            //hair\n            vec3 symIsect = vec3(abs(isect.x), isect.yz);\n\n            vec3 hairCenter = vec3(1.8, 2.5, 0.0);\n            float hairDist = clamp(distance(hairCenter, symIsect) * 0.7, 0.0, 1.0);\n            albedo = mix(vec3(0.8, 0.0, 0.0), vec3(0.0,0.8,0.0), hairDist);\n\n            vec3 hairVector = symIsect.xyz - hairCenter;\n            vec3 xAxis = normalize(-vec3(0.69512, 0.67625, 0.2439));\n            xAxis = normalize(-vec3(1.0, 0.0, 0.0));\n\n            float angle = acos(dot(normalize(hairVector.xy), xAxis.xy));\n            float d = length(hairVector);\n            \n            albedo = vec3(mod(angle * 12.0, 2.0));\n            vec2 uv = vec2(angle, d);\n            Material hairMat = hairPattern(vec2(uv));\n            albedo = hairMat.color;\n            normal = tbn * calcHairNormals(uv);\n            cosPow = hairMat.cosPow;\n            kd = hairMat.kd;\n            ks = hairMat.ks;\n            //albedo = normal;\n            //albedo = vec3(hairMat.displacement);\n        } else if (isect.w <= 2.0) {\n            // Neck\n            vec4 fbm = fbm3(isect.xyz, 3, 1.0, 9.1, 0.5, 2.4);\n\n            kd = 0.1;\n            ks = 0.9 + 0.6 * (fbm.x + 1.0);\n            cosPow = 12.0;\n            albedo = vec3(0.7, 0.57, 0.1);\n        } else if (isect.w <= 3.0) {\n            // Eyes\n            albedo = vec3(0.2, 0.2, 0.2);\n\n        } else if (isect.w <= 4.0) {\n            // Lips , red dress\n            vec4 fbm = fbm3(isect.xyz, 3, 1.0, 1.1, 0.4, 2.0);\n\n            cosPow = 3.0;\n            \n            ks = 0.5*(fbm.x + 1.0);\n            ks = getBias(ks, 0.4) * 2.6;\n\n            kd = 0.4;\n            albedo = vec3(183.0, 24.0, 42.0) / 255.0;\n\n        } else if (isect.w <= 5.0) {\n            // dress, eyes\n            kd = 0.9;\n            ks = 1.2;\n            albedo = vec3(226.0,234.0,236.0) / 255.0;\n            float freqTime = abs(sin(modTime * 0.01)) * 0.5 + 1.9;\n            \n            vec3 uv = isect.xyz;\n            //uv.x *= 1.2;\n            uv.y *= 0.3;\n            uv.y = fract(uv.y);\n            //uv.x = fract(0.5 * uv.x);\n            //uv.z = fract(0.3  * uv.z);\n\n            //uv.x += sin(uv.y);\n            float angle = acos(dot(normalize(uv), vec3(1.0,0.0,0.0)));\n            angle += pi;\n            vec2 uvAngle = vec2(angle, uv.y);\n            uvAngle.x = fract(-0.02 + 0.79 * uvAngle.x);\n            Material dressMat = robePattern(uvAngle);\n            vec3 patternNorm = calcRobeNormals(uvAngle);\n            normal = tbn * patternNorm;\n            albedo = dressMat.color;\n            ks = dressMat.ks;\n            kd = dressMat.kd;\n            cosPow = dressMat.cosPow;\n\n        } else if (isect.w <= 6.0) {\n            //  eyes\n            albedo = vec3(177.0,180.0,210.0) / 255.0;\n\n        } else if (isect.w <= 7.0) {\n            //  belt\n            vec3 center = floor(vec3(0.0, -4.3, 0.0));\n            vec3 uv = isect.xyz - center;\n            float angle = acos(dot(normalize(uv), vec3(1.0,0.0,0.0)));\n\n            vec2 uvAngle = vec2(angle, uv.y);\n            Material mat = beltPattern(uvAngle);\n            vec3 beltNorm = calcBeltNormals(uvAngle);\n            normal = tbn * beltNorm;\n\n            ks = mat.ks;\n            kd = mat.kd;\n            albedo = mat.color;\n            cosPow = mat.cosPow;\n        } else {\n            albedo = vec3(0.0);\n        }\n\n        for (int i = 0; i < 3; ++i) {\n            vec3 lightVec = normalize(pointLights[i].position - isect.xyz);\n            vec3 h = normalize(lightVec - viewVec);\n            float diffuse = clamp(dot(normal, lightVec), 0.0, 1.0);\n            float specularIntensity = max(pow(max(dot(h, normal), 0.f), cosPow), 0.f);\n            \n            float shadow = 1.0;\n            if (pointLights[i].castsShadow) {\n                shadow = softShadow(isect.xyz + normal * 0.04, lightVec, 0.02, 4.5, 32.0);\n            }\n            \n            vec3 lightIntensity = shadow * pointLights[i].color * clamp(kd * diffuse + ks * specularIntensity, 0.0, 2.7);\n            col += lightIntensity * albedo;\n        }\n        \n        // Diffuse Light\n        col += vec3(0.20, 0.21, 0.23) * albedo;\n    }\n        \n    out_Col = vec4(col, 1.0);\n}\n"},538:e=>{e.exports="#version 300 es\nprecision highp float;\n\n// The vertex shader used to render the background of the scene\n\nin vec4 vs_Pos;\nout vec2 fs_Pos;\n\nvoid main() {\n  fs_Pos = vs_Pos.xy;\n  gl_Position = vs_Pos;\n}\n"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";var e,t,i=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array;function s(){var e=new r(3);return r!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e,t,n){var i=new r(3);return i[0]=e,i[1]=t,i[2]=n,i}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function c(t){e=t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),s(),t=new r(4),r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0);const l=class{constructor(e){this.canvas=e}setClearColor(t,n,i,r){e.clearColor(t,n,i,r)}setSize(e,t){this.canvas.width=e,this.canvas.height=t}clear(){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}render(e,t,n,i){t.setEyeRefUp(e.controls.eye,e.controls.center,e.controls.up),t.setTime(i);for(let e of n)t.draw(e)}};function u(){var e=new r(16);return r!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function h(e,t,n,r){var s,a,o,c,l,u,h,v,f,d,p=t[0],m=t[1],x=t[2],b=r[0],y=r[1],g=r[2],M=n[0],w=n[1],P=n[2];return Math.abs(p-M)<i&&Math.abs(m-w)<i&&Math.abs(x-P)<i?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(h=p-M,v=m-w,f=x-P,s=y*(f*=d=1/Math.hypot(h,v,f))-g*(v*=d),a=g*(h*=d)-b*f,o=b*v-y*h,(d=Math.hypot(s,a,o))?(s*=d=1/d,a*=d,o*=d):(s=0,a=0,o=0),c=v*o-f*a,l=f*s-h*o,u=h*a-v*s,(d=Math.hypot(c,l,u))?(c*=d=1/d,l*=d,u*=d):(c=0,l=0,u=0),e[0]=s,e[1]=c,e[2]=h,e[3]=0,e[4]=a,e[5]=l,e[6]=v,e[7]=0,e[8]=o,e[9]=u,e[10]=f,e[11]=0,e[12]=-(s*p+a*m+o*x),e[13]=-(c*p+l*m+u*x),e[14]=-(h*p+v*m+f*x),e[15]=1,e)}var v=n(478);var f=null;class d{constructor(t,n){if(this.shader=e.createShader(t),e.shaderSource(this.shader,n),e.compileShader(this.shader),!e.getShaderParameter(this.shader,e.COMPILE_STATUS))throw e.getShaderInfoLog(this.shader)}}const p=class{constructor(t){this.prog=e.createProgram();for(let n of t)e.attachShader(this.prog,n.shader);if(e.linkProgram(this.prog),!e.getProgramParameter(this.prog,e.LINK_STATUS))throw e.getProgramInfoLog(this.prog);this.attrPos=e.getAttribLocation(this.prog,"vs_Pos"),this.unifEye=e.getUniformLocation(this.prog,"u_Eye"),this.unifRef=e.getUniformLocation(this.prog,"u_Ref"),this.unifUp=e.getUniformLocation(this.prog,"u_Up"),this.unifDimensions=e.getUniformLocation(this.prog,"u_Dimensions"),this.unifTime=e.getUniformLocation(this.prog,"u_Time")}use(){f!==this.prog&&(e.useProgram(this.prog),f=this.prog)}setEyeRefUp(t,n,i){this.use(),-1!==this.unifEye&&e.uniform3f(this.unifEye,t[0],t[1],t[2]),-1!==this.unifRef&&e.uniform3f(this.unifRef,n[0],n[1],n[2]),-1!==this.unifUp&&e.uniform3f(this.unifUp,i[0],i[1],i[2])}setDimensions(t,n){this.use(),-1!==this.unifDimensions&&e.uniform2f(this.unifDimensions,t,n)}setTime(t){this.use(),-1!==this.unifTime&&e.uniform1f(this.unifTime,t)}draw(t){this.use(),-1!=this.attrPos&&t.bindPos()&&(e.enableVertexAttribArray(this.attrPos),e.vertexAttribPointer(this.attrPos,4,e.FLOAT,!1,0,0)),t.bindIdx(),e.drawElements(t.drawMode(),t.elemCount(),e.UNSIGNED_INT,0),-1!=this.attrPos&&e.disableVertexAttribArray(this.attrPos)}},m=n(792);let x,b=0;function y(){x=new class extends class{constructor(){this.count=0,this.idxBound=!1,this.posBound=!1}destory(){e.deleteBuffer(this.bufIdx),e.deleteBuffer(this.bufPos)}generateIdx(){this.idxBound=!0,this.bufIdx=e.createBuffer()}generatePos(){this.posBound=!0,this.bufPos=e.createBuffer()}bindIdx(){return this.idxBound&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bufIdx),this.idxBound}bindPos(){return this.posBound&&e.bindBuffer(e.ARRAY_BUFFER,this.bufPos),this.posBound}elemCount(){return this.count}drawMode(){return e.TRIANGLES}}{constructor(e){var t,n,i,s;super(),this.center=(t=e[0],n=e[1],i=e[2],(s=new r(4))[0]=t,s[1]=n,s[2]=i,s[3]=1,s)}create(){this.indices=new Uint32Array([0,1,2,0,2,3]),this.positions=new Float32Array([-1,-1,.999,1,1,-1,.999,1,1,1,.999,1,-1,1,.999,1]),this.generateIdx(),this.generatePos(),this.count=this.indices.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bufIdx),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.bufPos),e.bufferData(e.ARRAY_BUFFER,this.positions,e.STATIC_DRAW),console.log("Created square")}}(a(0,0,0)),x.create()}!function(){window.addEventListener("keypress",(function(e){e.key}),!1),window.addEventListener("keyup",(function(e){e.key}),!1);const e=m();e.setMode(0),e.domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.top="0px",document.body.appendChild(e.domElement);const t=document.getElementById("canvas"),i=t.getContext("webgl2");i||alert("WebGL 2 not supported!"),c(i),y();const r=new class{constructor(e,t){this.projectionMatrix=u(),this.viewMatrix=u(),this.fovy=45,this.aspectRatio=1,this.near=.1,this.far=1e3,this.position=s(),this.direction=s(),this.target=s(),this.up=s(),this.controls=v(document.getElementById("canvas"),{eye:e,center:t}),o(this.target,this.position,this.direction),h(this.viewMatrix,this.controls.eye,this.controls.center,this.controls.up)}setAspectRatio(e){this.aspectRatio=e}updateProjectionMatrix(){var e,t,n,i,r,s,a;e=this.projectionMatrix,t=this.fovy,n=this.aspectRatio,i=this.near,r=this.far,a=1/Math.tan(t/2),e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(s=1/(i-r),e[10]=(r+i)*s,e[14]=2*r*i*s):(e[10]=-1,e[14]=-2*i)}update(){this.controls.tick(),o(this.target,this.position,this.direction),h(this.viewMatrix,this.controls.eye,this.controls.center,this.controls.up)}}(a(0,-1,-28),a(0,-9.5,0)),f=new l(t);f.setClearColor(164/255,233/255,1,1),i.enable(i.DEPTH_TEST);const g=new p([new d(i.VERTEX_SHADER,n(538)),new d(i.FRAGMENT_SHADER,n(779))]);window.addEventListener("resize",(function(){f.setSize(window.innerWidth,window.innerHeight),r.setAspectRatio(window.innerWidth/window.innerHeight),r.updateProjectionMatrix(),g.setDimensions(window.innerWidth,window.innerHeight)}),!1),f.setSize(window.innerWidth,window.innerHeight),r.setAspectRatio(window.innerWidth/window.innerHeight),r.updateProjectionMatrix(),g.setDimensions(window.innerWidth,window.innerHeight),function t(){r.update(),e.begin(),i.viewport(0,0,window.innerWidth,window.innerHeight),f.clear(),f.render(r,g,[x],b),b++,e.end(),requestAnimationFrame(t)}()}()})()})();
//# sourceMappingURL=bundle.js.map